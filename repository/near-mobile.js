var Wo=Object.defineProperty;var Qo=(Pt,Tt,Jt)=>Tt in Pt?Wo(Pt,Tt,{enumerable:!0,configurable:!0,writable:!0,value:Jt}):Pt[Tt]=Jt;var C=(Pt,Tt,Jt)=>Qo(Pt,typeof Tt!="symbol"?Tt+"":Tt,Jt);(function(){"use strict";var ae;var Pt=["u8","u16","u32","u64","u128","i8","i16","i32","i64","i128","f32","f64"],Tt=function(){function t(){this.offset=0,this.buffer_size=256,this.buffer=new ArrayBuffer(this.buffer_size),this.view=new DataView(this.buffer)}return t.prototype.resize_if_necessary=function(e){if(this.buffer_size-this.offset<e){this.buffer_size=Math.max(this.buffer_size*2,this.buffer_size+e);var n=new ArrayBuffer(this.buffer_size);new Uint8Array(n).set(new Uint8Array(this.buffer)),this.buffer=n,this.view=new DataView(n)}},t.prototype.get_used_buffer=function(){return new Uint8Array(this.buffer).slice(0,this.offset)},t.prototype.store_value=function(e,n){var r=n.substring(1),i=parseInt(r)/8;this.resize_if_necessary(i);var a=n[0]==="f"?"setFloat".concat(r):n[0]==="i"?"setInt".concat(r):"setUint".concat(r);this.view[a](this.offset,e,!0),this.offset+=i},t.prototype.store_bytes=function(e){this.resize_if_necessary(e.length),new Uint8Array(this.buffer).set(new Uint8Array(e),this.offset),this.offset+=e.length},t}(),Jt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();function xr(t){return Array.isArray(t)||!!t&&typeof t=="object"&&"length"in t&&typeof t.length=="number"&&(t.length===0||t.length>0&&t.length-1 in t)}function Wt(t,e,n){if(typeof t!==e)throw new Error("Expected ".concat(e," not ").concat(typeof t,"(").concat(t,") at ").concat(n.join(".")))}function Ar(t,e){var n=["number","string","bigint","boolean"].includes(typeof t),r=typeof t=="object"&&t!==null&&"toString"in t;if(!n&&!r)throw new Error("Expected bigint, number, boolean or string not ".concat(typeof t,"(").concat(t,") at ").concat(e.join(".")))}function cn(t,e,n){if(t!==e)throw new Error("Array length ".concat(t," does not match schema length ").concat(e," at ").concat(n.join(".")))}function Sr(t,e){if(typeof t!="object"||t===null)throw new Error("Expected object not ".concat(typeof t,"(").concat(t,") at ").concat(e.join(".")))}var un=Pt.concat(["bool","string"]),ln=["option","enum","array","set","map","struct"],Qt=function(t){Jt(e,t);function e(n,r){var i="Invalid schema: ".concat(JSON.stringify(n)," expected ").concat(r);return t.call(this,i)||this}return e}(Error);function zt(t){if(!(typeof t=="string"&&un.includes(t))){if(t&&typeof t=="object"){var e=Object.keys(t);if(e.length===1&&ln.includes(e[0])){var n=e[0];if(n==="option")return zt(t[n]);if(n==="enum")return Er(t[n]);if(n==="array")return Br(t[n]);if(n==="set")return zt(t[n]);if(n==="map")return Cr(t[n]);if(n==="struct")return Ir(t[n])}}throw new Qt(t,ln.join(", ")+" or "+un.join(", "))}}function Er(t){if(!Array.isArray(t))throw new Qt(t,"Array");for(var e=0,n=t;e<n.length;e++){var r=n[e];if(typeof r!="object"||!("struct"in r))throw new Error('Missing "struct" key in enum schema');if(typeof r.struct!="object"||Object.keys(r.struct).length!==1)throw new Error('The "struct" in each enum must have a single key');zt({struct:r.struct})}}function Br(t){if(typeof t!="object")throw new Qt(t,"{ type, len? }");if(t.len&&typeof t.len!="number")throw new Error("Invalid schema: ".concat(t));if("type"in t)return zt(t.type);throw new Qt(t,"{ type, len? }")}function Cr(t){if(typeof t=="object"&&"key"in t&&"value"in t)zt(t.key),zt(t.value);else throw new Qt(t,"{ key, value }")}function Ir(t){if(typeof t!="object")throw new Qt(t,"object");for(var e in t)zt(t[e])}var Or=function(){function t(e){this.encoded=new Tt,this.fieldPath=["value"],this.checkTypes=e}return t.prototype.encode=function(e,n){return this.encode_value(e,n),this.encoded.get_used_buffer()},t.prototype.encode_value=function(e,n){if(typeof n=="string"){if(Pt.includes(n))return this.encode_integer(e,n);if(n==="string")return this.encode_string(e);if(n==="bool")return this.encode_boolean(e)}if(typeof n=="object"){if("option"in n)return this.encode_option(e,n);if("enum"in n)return this.encode_enum(e,n);if("array"in n)return this.encode_array(e,n);if("set"in n)return this.encode_set(e,n);if("map"in n)return this.encode_map(e,n);if("struct"in n)return this.encode_struct(e,n)}},t.prototype.encode_integer=function(e,n){var r=parseInt(n.substring(1));r<=32||n=="f64"?(this.checkTypes&&Wt(e,"number",this.fieldPath),this.encoded.store_value(e,n)):(this.checkTypes&&Ar(e,this.fieldPath),this.encode_bigint(BigInt(e),r))},t.prototype.encode_bigint=function(e,n){for(var r=n/8,i=new Uint8Array(r),a=0;a<r;a++)i[a]=Number(e&BigInt(255)),e=e>>BigInt(8);this.encoded.store_bytes(new Uint8Array(i))},t.prototype.encode_string=function(e){this.checkTypes&&Wt(e,"string",this.fieldPath);for(var n=e,r=[],i=0;i<n.length;i++){var a=n.charCodeAt(i);a<128?r.push(a):a<2048?r.push(192|a>>6,128|a&63):a<55296||a>=57344?r.push(224|a>>12,128|a>>6&63,128|a&63):(i++,a=65536+((a&1023)<<10|n.charCodeAt(i)&1023),r.push(240|a>>18,128|a>>12&63,128|a>>6&63,128|a&63))}this.encoded.store_value(r.length,"u32"),this.encoded.store_bytes(new Uint8Array(r))},t.prototype.encode_boolean=function(e){this.checkTypes&&Wt(e,"boolean",this.fieldPath),this.encoded.store_value(e?1:0,"u8")},t.prototype.encode_option=function(e,n){e==null?this.encoded.store_value(0,"u8"):(this.encoded.store_value(1,"u8"),this.encode_value(e,n.option))},t.prototype.encode_enum=function(e,n){this.checkTypes&&Sr(e,this.fieldPath);for(var r=Object.keys(e)[0],i=0;i<n.enum.length;i++){var a=n.enum[i];if(r===Object.keys(a.struct)[0])return this.encoded.store_value(i,"u8"),this.encode_struct(e,a)}throw new Error("Enum key (".concat(r,") not found in enum schema: ").concat(JSON.stringify(n)," at ").concat(this.fieldPath.join(".")))},t.prototype.encode_array=function(e,n){if(xr(e))return this.encode_arraylike(e,n);if(e instanceof ArrayBuffer)return this.encode_buffer(e,n);throw new Error("Expected Array-like not ".concat(typeof e,"(").concat(e,") at ").concat(this.fieldPath.join(".")))},t.prototype.encode_arraylike=function(e,n){n.array.len?cn(e.length,n.array.len,this.fieldPath):this.encoded.store_value(e.length,"u32");for(var r=0;r<e.length;r++)this.encode_value(e[r],n.array.type)},t.prototype.encode_buffer=function(e,n){n.array.len?cn(e.byteLength,n.array.len,this.fieldPath):this.encoded.store_value(e.byteLength,"u32"),this.encoded.store_bytes(new Uint8Array(e))},t.prototype.encode_set=function(e,n){this.checkTypes&&Wt(e,"object",this.fieldPath);var r=e instanceof Set,i=r?Array.from(e.values()):Object.values(e);this.encoded.store_value(i.length,"u32");for(var a=0,h=i;a<h.length;a++){var l=h[a];this.encode_value(l,n.set)}},t.prototype.encode_map=function(e,n){this.checkTypes&&Wt(e,"object",this.fieldPath);var r=e instanceof Map,i=r?Array.from(e.keys()):Object.keys(e);this.encoded.store_value(i.length,"u32");for(var a=0,h=i;a<h.length;a++){var l=h[a];this.encode_value(l,n.map.key),this.encode_value(r?e.get(l):e[l],n.map.value)}},t.prototype.encode_struct=function(e,n){this.checkTypes&&Wt(e,"object",this.fieldPath);for(var r=0,i=Object.keys(n.struct);r<i.length;r++){var a=i[r];this.fieldPath.push(a),this.encode_value(e[a],n.struct[a]),this.fieldPath.pop()}},t}();function ke(t,e,n){n===void 0&&(n=!0),n&&zt(t);var r=new Or(n);return r.encode(e,t)}/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function dn(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function De(t,e=""){if(!Number.isSafeInteger(t)||t<0){const n=e&&`"${e}" `;throw new Error(`${n}expected integer >= 0, got ${t}`)}}function mt(t,e,n=""){const r=dn(t),i=t==null?void 0:t.length,a=e!==void 0;if(!r||a&&i!==e){const h=n&&`"${n}" `,l=a?` of length ${e}`:"",d=r?`length=${i}`:`type=${typeof t}`;throw new Error(h+"expected Uint8Array"+l+", got "+d)}return t}function fn(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Mr(t,e){mt(t,void 0,"digestInto() output");const n=e.outputLen;if(t.length<n)throw new Error('"digestInto() output" expected to be of length >='+n)}function ce(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function qe(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Ot(t,e){return t<<32-e|t>>>e}const hn=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",kr=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Re(t){if(mt(t),hn)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=kr[t[n]];return e}const $t={_0:48,_9:57,A:65,F:70,a:97,f:102};function gn(t){if(t>=$t._0&&t<=$t._9)return t-$t._0;if(t>=$t.A&&t<=$t.F)return t-($t.A-10);if(t>=$t.a&&t<=$t.f)return t-($t.a-10)}function pn(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(hn)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let i=0,a=0;i<n;i++,a+=2){const h=gn(t.charCodeAt(a)),l=gn(t.charCodeAt(a+1));if(h===void 0||l===void 0){const d=t[a]+t[a+1];throw new Error('hex string expected, got non-hex character "'+d+'" at index '+a)}r[i]=h*16+l}return r}function wn(...t){let e=0;for(let r=0;r<t.length;r++){const i=t[r];mt(i),e+=i.length}const n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){const a=t[r];n.set(a,i),i+=a.length}return n}function bn(t,e={}){const n=(i,a)=>t(a).update(i).digest(),r=t(void 0);return n.outputLen=r.outputLen,n.blockLen=r.blockLen,n.create=i=>t(i),Object.assign(n,e),Object.freeze(n)}function Dr(t=32){const e=typeof globalThis=="object"?globalThis.crypto:null;if(typeof(e==null?void 0:e.getRandomValues)!="function")throw new Error("crypto.getRandomValues must be defined");return e.getRandomValues(new Uint8Array(t))}const mn=t=>({oid:Uint8Array.from([6,9,96,134,72,1,101,3,4,2,t])});function qr(t,e,n){return t&e^~t&n}function Rr(t,e,n){return t&e^t&n^e&n}class yn{constructor(e,n,r,i){C(this,"blockLen");C(this,"outputLen");C(this,"padOffset");C(this,"isLE");C(this,"buffer");C(this,"view");C(this,"finished",!1);C(this,"length",0);C(this,"pos",0);C(this,"destroyed",!1);this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=i,this.buffer=new Uint8Array(e),this.view=qe(this.buffer)}update(e){fn(this),mt(e);const{view:n,buffer:r,blockLen:i}=this,a=e.length;for(let h=0;h<a;){const l=Math.min(i-this.pos,a-h);if(l===i){const d=qe(e);for(;i<=a-h;h+=i)this.process(d,h);continue}r.set(e.subarray(h,h+l),this.pos),this.pos+=l,h+=l,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){fn(this),Mr(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:a}=this;let{pos:h}=this;n[h++]=128,ce(this.buffer.subarray(h)),this.padOffset>i-h&&(this.process(r,0),h=0);for(let A=h;A<i;A++)n[A]=0;r.setBigUint64(i-8,BigInt(this.length*8),a),this.process(r,0);const l=qe(e),d=this.outputLen;if(d%4)throw new Error("_sha2: outputLen must be aligned to 32bit");const y=d/4,$=this.get();if(y>$.length)throw new Error("_sha2: outputLen bigger than state");for(let A=0;A<y;A++)l.setUint32(4*A,$[A],a)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:a,destroyed:h,pos:l}=this;return e.destroyed=h,e.finished=a,e.length=i,e.pos=l,i%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const jt=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),_t=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),we=BigInt(2**32-1),vn=BigInt(32);function Tr(t,e=!1){return e?{h:Number(t&we),l:Number(t>>vn&we)}:{h:Number(t>>vn&we)|0,l:Number(t&we)|0}}function $r(t,e=!1){const n=t.length;let r=new Uint32Array(n),i=new Uint32Array(n);for(let a=0;a<n;a++){const{h,l}=Tr(t[a],e);[r[a],i[a]]=[h,l]}return[r,i]}const _n=(t,e,n)=>t>>>n,xn=(t,e,n)=>t<<32-n|e>>>n,te=(t,e,n)=>t>>>n|e<<32-n,ee=(t,e,n)=>t<<32-n|e>>>n,be=(t,e,n)=>t<<64-n|e>>>n-32,me=(t,e,n)=>t>>>n-32|e<<64-n;function Nt(t,e,n,r){const i=(e>>>0)+(r>>>0);return{h:t+n+(i/2**32|0)|0,l:i|0}}const Nr=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),Pr=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,zr=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),jr=(t,e,n,r,i)=>e+n+r+i+(t/2**32|0)|0,Lr=(t,e,n,r,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(i>>>0),Ur=(t,e,n,r,i,a)=>e+n+r+i+a+(t/2**32|0)|0,Kr=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Lt=new Uint32Array(64);class Fr extends yn{constructor(e){super(64,e,8,!1)}get(){const{A:e,B:n,C:r,D:i,E:a,F:h,G:l,H:d}=this;return[e,n,r,i,a,h,l,d]}set(e,n,r,i,a,h,l,d){this.A=e|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=a|0,this.F=h|0,this.G=l|0,this.H=d|0}process(e,n){for(let A=0;A<16;A++,n+=4)Lt[A]=e.getUint32(n,!1);for(let A=16;A<64;A++){const z=Lt[A-15],H=Lt[A-2],G=Ot(z,7)^Ot(z,18)^z>>>3,R=Ot(H,17)^Ot(H,19)^H>>>10;Lt[A]=R+Lt[A-7]+G+Lt[A-16]|0}let{A:r,B:i,C:a,D:h,E:l,F:d,G:y,H:$}=this;for(let A=0;A<64;A++){const z=Ot(l,6)^Ot(l,11)^Ot(l,25),H=$+z+qr(l,d,y)+Kr[A]+Lt[A]|0,R=(Ot(r,2)^Ot(r,13)^Ot(r,22))+Rr(r,i,a)|0;$=y,y=d,d=l,l=h+H|0,h=a,a=i,i=r,r=H+R|0}r=r+this.A|0,i=i+this.B|0,a=a+this.C|0,h=h+this.D|0,l=l+this.E|0,d=d+this.F|0,y=y+this.G|0,$=$+this.H|0,this.set(r,i,a,h,l,d,y,$)}roundClean(){ce(Lt)}destroy(){this.set(0,0,0,0,0,0,0,0),ce(this.buffer)}}class Hr extends Fr{constructor(){super(32);C(this,"A",jt[0]|0);C(this,"B",jt[1]|0);C(this,"C",jt[2]|0);C(this,"D",jt[3]|0);C(this,"E",jt[4]|0);C(this,"F",jt[5]|0);C(this,"G",jt[6]|0);C(this,"H",jt[7]|0)}}const An=$r(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Gr=An[0],Zr=An[1],Ut=new Uint32Array(80),Kt=new Uint32Array(80);class Vr extends yn{constructor(e){super(128,e,16,!1)}get(){const{Ah:e,Al:n,Bh:r,Bl:i,Ch:a,Cl:h,Dh:l,Dl:d,Eh:y,El:$,Fh:A,Fl:z,Gh:H,Gl:G,Hh:R,Hl:j}=this;return[e,n,r,i,a,h,l,d,y,$,A,z,H,G,R,j]}set(e,n,r,i,a,h,l,d,y,$,A,z,H,G,R,j){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=a|0,this.Cl=h|0,this.Dh=l|0,this.Dl=d|0,this.Eh=y|0,this.El=$|0,this.Fh=A|0,this.Fl=z|0,this.Gh=H|0,this.Gl=G|0,this.Hh=R|0,this.Hl=j|0}process(e,n){for(let I=0;I<16;I++,n+=4)Ut[I]=e.getUint32(n),Kt[I]=e.getUint32(n+=4);for(let I=16;I<80;I++){const E=Ut[I-15]|0,k=Kt[I-15]|0,N=te(E,k,1)^te(E,k,8)^_n(E,k,7),J=ee(E,k,1)^ee(E,k,8)^xn(E,k,7),M=Ut[I-2]|0,q=Kt[I-2]|0,L=te(M,q,19)^be(M,q,61)^_n(M,q,6),nt=ee(M,q,19)^me(M,q,61)^xn(M,q,6),W=zr(J,nt,Kt[I-7],Kt[I-16]),Q=jr(W,N,L,Ut[I-7],Ut[I-16]);Ut[I]=Q|0,Kt[I]=W|0}let{Ah:r,Al:i,Bh:a,Bl:h,Ch:l,Cl:d,Dh:y,Dl:$,Eh:A,El:z,Fh:H,Fl:G,Gh:R,Gl:j,Hh:Y,Hl:D}=this;for(let I=0;I<80;I++){const E=te(A,z,14)^te(A,z,18)^be(A,z,41),k=ee(A,z,14)^ee(A,z,18)^me(A,z,41),N=A&H^~A&R,J=z&G^~z&j,M=Lr(D,k,J,Zr[I],Kt[I]),q=Ur(M,Y,E,N,Gr[I],Ut[I]),L=M|0,nt=te(r,i,28)^be(r,i,34)^be(r,i,39),W=ee(r,i,28)^me(r,i,34)^me(r,i,39),Q=r&a^r&l^a&l,v=i&h^i&d^h&d;Y=R|0,D=j|0,R=H|0,j=G|0,H=A|0,G=z|0,{h:A,l:z}=Nt(y|0,$|0,q|0,L|0),y=l|0,$=d|0,l=a|0,d=h|0,a=r|0,h=i|0;const m=Nr(L,W,v);r=Pr(m,q,nt,Q),i=m|0}({h:r,l:i}=Nt(this.Ah|0,this.Al|0,r|0,i|0)),{h:a,l:h}=Nt(this.Bh|0,this.Bl|0,a|0,h|0),{h:l,l:d}=Nt(this.Ch|0,this.Cl|0,l|0,d|0),{h:y,l:$}=Nt(this.Dh|0,this.Dl|0,y|0,$|0),{h:A,l:z}=Nt(this.Eh|0,this.El|0,A|0,z|0),{h:H,l:G}=Nt(this.Fh|0,this.Fl|0,H|0,G|0),{h:R,l:j}=Nt(this.Gh|0,this.Gl|0,R|0,j|0),{h:Y,l:D}=Nt(this.Hh|0,this.Hl|0,Y|0,D|0),this.set(r,i,a,h,l,d,y,$,A,z,H,G,R,j,Y,D)}roundClean(){ce(Ut,Kt)}destroy(){ce(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class Yr extends Vr{constructor(){super(64);C(this,"Ah",_t[0]|0);C(this,"Al",_t[1]|0);C(this,"Bh",_t[2]|0);C(this,"Bl",_t[3]|0);C(this,"Ch",_t[4]|0);C(this,"Cl",_t[5]|0);C(this,"Dh",_t[6]|0);C(this,"Dl",_t[7]|0);C(this,"Eh",_t[8]|0);C(this,"El",_t[9]|0);C(this,"Fh",_t[10]|0);C(this,"Fl",_t[11]|0);C(this,"Gh",_t[12]|0);C(this,"Gl",_t[13]|0);C(this,"Hh",_t[14]|0);C(this,"Hl",_t[15]|0)}}const Sn=bn(()=>new Hr,mn(1)),Xr=bn(()=>new Yr,mn(3));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const En=BigInt(0),Bn=BigInt(1);function Te(t,e=""){if(typeof t!="boolean"){const n=e&&`"${e}" `;throw new Error(n+"expected boolean, got type="+typeof t)}return t}function Jr(t){if(typeof t=="bigint"){if(!ve(t))throw new Error("positive bigint expected, got "+t)}else De(t);return t}function Cn(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?En:BigInt("0x"+t)}function Wr(t){return Cn(Re(t))}function ye(t){return Cn(Re($e(mt(t)).reverse()))}function In(t,e){De(e),t=Jr(t);const n=pn(t.toString(16).padStart(e*2,"0"));if(n.length!==e)throw new Error("number too large");return n}function Qr(t,e){return In(t,e).reverse()}function $e(t){return Uint8Array.from(t)}const ve=t=>typeof t=="bigint"&&En<=t;function ti(t,e,n){return ve(t)&&ve(e)&&ve(n)&&e<=t&&t<n}function On(t,e,n,r){if(!ti(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}const ei=t=>(Bn<<BigInt(t))-Bn;function Ne(t,e={},n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function r(a,h,l){const d=t[a];if(l&&d===void 0)return;const y=typeof d;if(y!==h||d===null)throw new Error(`param "${a}" is invalid: expected ${h}, got ${y}`)}const i=(a,h)=>Object.entries(a).forEach(([l,d])=>r(l,d,h));i(e,!1),i(n,!0)}function Mn(t){const e=new WeakMap;return(n,...r)=>{const i=e.get(n);if(i!==void 0)return i;const a=t(n,...r);return e.set(n,a),a}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Et=BigInt(0),At=BigInt(1),Ht=BigInt(2),kn=BigInt(3),Dn=BigInt(4),qn=BigInt(5),ni=BigInt(7),Rn=BigInt(8),ri=BigInt(9),Tn=BigInt(16);function pt(t,e){const n=t%e;return n>=Et?n:e+n}function Mt(t,e,n){let r=t;for(;e-- >Et;)r*=r,r%=n;return r}function $n(t,e){if(t===Et)throw new Error("invert: expected non-zero number");if(e<=Et)throw new Error("invert: expected positive modulus, got "+e);let n=pt(t,e),r=e,i=Et,a=At;for(;n!==Et;){const l=r/n,d=r%n,y=i-a*l;r=n,n=d,i=a,a=y}if(r!==At)throw new Error("invert: does not exist");return pt(i,e)}function Pe(t,e,n){if(!t.eql(t.sqr(e),n))throw new Error("Cannot find square root")}function Nn(t,e){const n=(t.ORDER+At)/Dn,r=t.pow(e,n);return Pe(t,r,e),r}function ii(t,e){const n=(t.ORDER-qn)/Rn,r=t.mul(e,Ht),i=t.pow(r,n),a=t.mul(e,i),h=t.mul(t.mul(a,Ht),i),l=t.mul(a,t.sub(h,t.ONE));return Pe(t,l,e),l}function oi(t){const e=ze(t),n=Pn(t),r=n(e,e.neg(e.ONE)),i=n(e,r),a=n(e,e.neg(r)),h=(t+ni)/Tn;return(l,d)=>{let y=l.pow(d,h),$=l.mul(y,r);const A=l.mul(y,i),z=l.mul(y,a),H=l.eql(l.sqr($),d),G=l.eql(l.sqr(A),d);y=l.cmov(y,$,H),$=l.cmov(z,A,G);const R=l.eql(l.sqr($),d),j=l.cmov(y,$,R);return Pe(l,j,d),j}}function Pn(t){if(t<kn)throw new Error("sqrt is not defined for small field");let e=t-At,n=0;for(;e%Ht===Et;)e/=Ht,n++;let r=Ht;const i=ze(t);for(;jn(i,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return Nn;let a=i.pow(r,e);const h=(e+At)/Ht;return function(d,y){if(d.is0(y))return y;if(jn(d,y)!==1)throw new Error("Cannot find square root");let $=n,A=d.mul(d.ONE,a),z=d.pow(y,e),H=d.pow(y,h);for(;!d.eql(z,d.ONE);){if(d.is0(z))return d.ZERO;let G=1,R=d.sqr(z);for(;!d.eql(R,d.ONE);)if(G++,R=d.sqr(R),G===$)throw new Error("Cannot find square root");const j=At<<BigInt($-G-1),Y=d.pow(A,j);$=G,A=d.sqr(Y),z=d.mul(z,A),H=d.mul(H,Y)}return H}}function si(t){return t%Dn===kn?Nn:t%Rn===qn?ii:t%Tn===ri?oi(t):Pn(t)}const ai=(t,e)=>(pt(t,e)&At)===At,ci=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function ui(t){const e={ORDER:"bigint",BYTES:"number",BITS:"number"},n=ci.reduce((r,i)=>(r[i]="function",r),e);return Ne(t,n),t}function li(t,e,n){if(n<Et)throw new Error("invalid exponent, negatives unsupported");if(n===Et)return t.ONE;if(n===At)return e;let r=t.ONE,i=e;for(;n>Et;)n&At&&(r=t.mul(r,i)),i=t.sqr(i),n>>=At;return r}function zn(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),i=e.reduce((h,l,d)=>t.is0(l)?h:(r[d]=h,t.mul(h,l)),t.ONE),a=t.inv(i);return e.reduceRight((h,l,d)=>t.is0(l)?h:(r[d]=t.mul(h,r[d]),t.mul(h,l)),a),r}function jn(t,e){const n=(t.ORDER-At)/Ht,r=t.pow(e,n),i=t.eql(r,t.ONE),a=t.eql(r,t.ZERO),h=t.eql(r,t.neg(t.ONE));if(!i&&!a&&!h)throw new Error("invalid Legendre symbol result");return i?1:a?0:-1}function di(t,e){e!==void 0&&De(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}class fi{constructor(e,n={}){C(this,"ORDER");C(this,"BITS");C(this,"BYTES");C(this,"isLE");C(this,"ZERO",Et);C(this,"ONE",At);C(this,"_lengths");C(this,"_sqrt");C(this,"_mod");var h;if(e<=Et)throw new Error("invalid field: expected ORDER > 0, got "+e);let r;this.isLE=!1,n!=null&&typeof n=="object"&&(typeof n.BITS=="number"&&(r=n.BITS),typeof n.sqrt=="function"&&(this.sqrt=n.sqrt),typeof n.isLE=="boolean"&&(this.isLE=n.isLE),n.allowedLengths&&(this._lengths=(h=n.allowedLengths)==null?void 0:h.slice()),typeof n.modFromBytes=="boolean"&&(this._mod=n.modFromBytes));const{nBitLength:i,nByteLength:a}=di(e,r);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");this.ORDER=e,this.BITS=i,this.BYTES=a,this._sqrt=void 0,Object.preventExtensions(this)}create(e){return pt(e,this.ORDER)}isValid(e){if(typeof e!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof e);return Et<=e&&e<this.ORDER}is0(e){return e===Et}isValidNot0(e){return!this.is0(e)&&this.isValid(e)}isOdd(e){return(e&At)===At}neg(e){return pt(-e,this.ORDER)}eql(e,n){return e===n}sqr(e){return pt(e*e,this.ORDER)}add(e,n){return pt(e+n,this.ORDER)}sub(e,n){return pt(e-n,this.ORDER)}mul(e,n){return pt(e*n,this.ORDER)}pow(e,n){return li(this,e,n)}div(e,n){return pt(e*$n(n,this.ORDER),this.ORDER)}sqrN(e){return e*e}addN(e,n){return e+n}subN(e,n){return e-n}mulN(e,n){return e*n}inv(e){return $n(e,this.ORDER)}sqrt(e){return this._sqrt||(this._sqrt=si(this.ORDER)),this._sqrt(this,e)}toBytes(e){return this.isLE?Qr(e,this.BYTES):In(e,this.BYTES)}fromBytes(e,n=!1){mt(e);const{_lengths:r,BYTES:i,isLE:a,ORDER:h,_mod:l}=this;if(r){if(!r.includes(e.length)||e.length>i)throw new Error("Field.fromBytes: expected "+r+" bytes, got "+e.length);const y=new Uint8Array(i);y.set(e,a?0:y.length-e.length),e=y}if(e.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+e.length);let d=a?ye(e):Wr(e);if(l&&(d=pt(d,h)),!n&&!this.isValid(d))throw new Error("invalid field element: outside of range 0..ORDER");return d}invertBatch(e){return zn(this,e)}cmov(e,n,r){return r?n:e}}function ze(t,e={}){return new fi(t,e)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _e=BigInt(0),je=BigInt(1);function Ln(t,e){const n=e.negate();return t?n:e}function Le(t,e){const n=zn(t.Fp,e.map(r=>r.Z));return e.map((r,i)=>t.fromAffine(r.toAffine(n[i])))}function Un(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function Ue(t,e){Un(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),i=2**t,a=ei(t),h=BigInt(t);return{windows:n,windowSize:r,mask:a,maxNumber:i,shiftBy:h}}function Kn(t,e,n){const{windowSize:r,mask:i,maxNumber:a,shiftBy:h}=n;let l=Number(t&i),d=t>>h;l>r&&(l-=a,d+=je);const y=e*r,$=y+Math.abs(l)-1,A=l===0,z=l<0,H=e%2!==0;return{nextN:d,offset:$,isZero:A,isNeg:z,isNegF:H,offsetF:y}}const Ke=new WeakMap,Fn=new WeakMap;function Fe(t){return Fn.get(t)||1}function Hn(t){if(t!==_e)throw new Error("invalid wNAF")}class hi{constructor(e,n){C(this,"BASE");C(this,"ZERO");C(this,"Fn");C(this,"bits");this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=n}_unsafeLadder(e,n,r=this.ZERO){let i=e;for(;n>_e;)n&je&&(r=r.add(i)),i=i.double(),n>>=je;return r}precomputeWindow(e,n){const{windows:r,windowSize:i}=Ue(n,this.bits),a=[];let h=e,l=h;for(let d=0;d<r;d++){l=h,a.push(l);for(let y=1;y<i;y++)l=l.add(h),a.push(l);h=l.double()}return a}wNAF(e,n,r){if(!this.Fn.isValid(r))throw new Error("invalid scalar");let i=this.ZERO,a=this.BASE;const h=Ue(e,this.bits);for(let l=0;l<h.windows;l++){const{nextN:d,offset:y,isZero:$,isNeg:A,isNegF:z,offsetF:H}=Kn(r,l,h);r=d,$?a=a.add(Ln(z,n[H])):i=i.add(Ln(A,n[y]))}return Hn(r),{p:i,f:a}}wNAFUnsafe(e,n,r,i=this.ZERO){const a=Ue(e,this.bits);for(let h=0;h<a.windows&&r!==_e;h++){const{nextN:l,offset:d,isZero:y,isNeg:$}=Kn(r,h,a);if(r=l,!y){const A=n[d];i=i.add($?A.negate():A)}}return Hn(r),i}getPrecomputes(e,n,r){let i=Ke.get(n);return i||(i=this.precomputeWindow(n,e),e!==1&&(typeof r=="function"&&(i=r(i)),Ke.set(n,i))),i}cached(e,n,r){const i=Fe(e);return this.wNAF(i,this.getPrecomputes(i,e,r),n)}unsafe(e,n,r,i){const a=Fe(e);return a===1?this._unsafeLadder(e,n,i):this.wNAFUnsafe(a,this.getPrecomputes(a,e,r),n,i)}createCache(e,n){Un(n,this.bits),Fn.set(e,n),Ke.delete(e)}hasCache(e){return Fe(e)!==1}}function Gn(t,e,n){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return ui(e),e}else return ze(t,{isLE:n})}function gi(t,e,n={},r){if(r===void 0&&(r=t==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const d of["p","n","h"]){const y=e[d];if(!(typeof y=="bigint"&&y>_e))throw new Error(`CURVE.${d} must be positive bigint`)}const i=Gn(e.p,n.Fp,r),a=Gn(e.n,n.Fn,r),l=["Gx","Gy","a","d"];for(const d of l)if(!i.isValid(e[d]))throw new Error(`CURVE.${d} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:i,Fn:a}}function pi(t,e){return function(r){const i=t(r);return{secretKey:i,publicKey:e(i)}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ft=BigInt(0),bt=BigInt(1),He=BigInt(2),wi=BigInt(8);function bi(t,e,n,r){const i=t.sqr(n),a=t.sqr(r),h=t.add(t.mul(e.a,i),a),l=t.add(t.ONE,t.mul(e.d,t.mul(i,a)));return t.eql(h,l)}function mi(t,e={}){const n=gi("edwards",t,e,e.FpFnLE),{Fp:r,Fn:i}=n;let a=n.CURVE;const{h}=a;Ne(e,{},{uvRatio:"function"});const l=He<<BigInt(i.BYTES*8)-bt,d=Y=>r.create(Y),y=e.uvRatio||((Y,D)=>{try{return{isValid:!0,value:r.sqrt(r.div(Y,D))}}catch{return{isValid:!1,value:Ft}}});if(!bi(r,a,a.Gx,a.Gy))throw new Error("bad curve params: generator point");function $(Y,D,I=!1){const E=I?bt:Ft;return On("coordinate "+Y,D,E,l),D}function A(Y){if(!(Y instanceof G))throw new Error("EdwardsPoint expected")}const z=Mn((Y,D)=>{const{X:I,Y:E,Z:k}=Y,N=Y.is0();D==null&&(D=N?wi:r.inv(k));const J=d(I*D),M=d(E*D),q=r.mul(k,D);if(N)return{x:Ft,y:bt};if(q!==bt)throw new Error("invZ was invalid");return{x:J,y:M}}),H=Mn(Y=>{const{a:D,d:I}=a;if(Y.is0())throw new Error("bad point: ZERO");const{X:E,Y:k,Z:N,T:J}=Y,M=d(E*E),q=d(k*k),L=d(N*N),nt=d(L*L),W=d(M*D),Q=d(L*d(W+q)),v=d(nt+d(I*d(M*q)));if(Q!==v)throw new Error("bad point: equation left != right (1)");const m=d(E*k),p=d(N*J);if(m!==p)throw new Error("bad point: equation left != right (2)");return!0}),j=class j{constructor(D,I,E,k){C(this,"X");C(this,"Y");C(this,"Z");C(this,"T");this.X=$("x",D),this.Y=$("y",I),this.Z=$("z",E,!0),this.T=$("t",k),Object.freeze(this)}static CURVE(){return a}static fromAffine(D){if(D instanceof j)throw new Error("extended point not allowed");const{x:I,y:E}=D||{};return $("x",I),$("y",E),new j(I,E,bt,d(I*E))}static fromBytes(D,I=!1){const E=r.BYTES,{a:k,d:N}=a;D=$e(mt(D,E,"point")),Te(I,"zip215");const J=$e(D),M=D[E-1];J[E-1]=M&-129;const q=ye(J),L=I?l:r.ORDER;On("point.y",q,Ft,L);const nt=d(q*q),W=d(nt-bt),Q=d(N*nt-k);let{isValid:v,value:m}=y(W,Q);if(!v)throw new Error("bad point: invalid y coordinate");const p=(m&bt)===bt,s=(M&128)!==0;if(!I&&m===Ft&&s)throw new Error("bad point: x=0 and x_0=1");return s!==p&&(m=d(-m)),j.fromAffine({x:m,y:q})}static fromHex(D,I=!1){return j.fromBytes(pn(D),I)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(D=8,I=!0){return R.createCache(this,D),I||this.multiply(He),this}assertValidity(){H(this)}equals(D){A(D);const{X:I,Y:E,Z:k}=this,{X:N,Y:J,Z:M}=D,q=d(I*M),L=d(N*k),nt=d(E*M),W=d(J*k);return q===L&&nt===W}is0(){return this.equals(j.ZERO)}negate(){return new j(d(-this.X),this.Y,this.Z,d(-this.T))}double(){const{a:D}=a,{X:I,Y:E,Z:k}=this,N=d(I*I),J=d(E*E),M=d(He*d(k*k)),q=d(D*N),L=I+E,nt=d(d(L*L)-N-J),W=q+J,Q=W-M,v=q-J,m=d(nt*Q),p=d(W*v),s=d(nt*v),o=d(Q*W);return new j(m,p,o,s)}add(D){A(D);const{a:I,d:E}=a,{X:k,Y:N,Z:J,T:M}=this,{X:q,Y:L,Z:nt,T:W}=D,Q=d(k*q),v=d(N*L),m=d(M*E*W),p=d(J*nt),s=d((k+N)*(q+L)-Q-v),o=p-m,u=p+m,f=d(v-I*Q),c=d(s*o),b=d(u*f),O=d(s*f),B=d(o*u);return new j(c,b,B,O)}subtract(D){return this.add(D.negate())}multiply(D){if(!i.isValidNot0(D))throw new Error("invalid scalar: expected 1 <= sc < curve.n");const{p:I,f:E}=R.cached(this,D,k=>Le(j,k));return Le(j,[I,E])[0]}multiplyUnsafe(D,I=j.ZERO){if(!i.isValid(D))throw new Error("invalid scalar: expected 0 <= sc < curve.n");return D===Ft?j.ZERO:this.is0()||D===bt?this:R.unsafe(this,D,E=>Le(j,E),I)}isSmallOrder(){return this.multiplyUnsafe(h).is0()}isTorsionFree(){return R.unsafe(this,a.n).is0()}toAffine(D){return z(this,D)}clearCofactor(){return h===bt?this:this.multiplyUnsafe(h)}toBytes(){const{x:D,y:I}=this.toAffine(),E=r.toBytes(I);return E[E.length-1]|=D&bt?128:0,E}toHex(){return Re(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}};C(j,"BASE",new j(a.Gx,a.Gy,bt,d(a.Gx*a.Gy))),C(j,"ZERO",new j(Ft,bt,bt,Ft)),C(j,"Fp",r),C(j,"Fn",i);let G=j;const R=new hi(G,i.BITS);return G.BASE.precompute(8),G}function yi(t,e,n={}){if(typeof e!="function")throw new Error('"hash" function param is required');Ne(n,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:r}=n,{BASE:i,Fp:a,Fn:h}=t,l=n.randomBytes||Dr,d=n.adjustScalarBytes||(M=>M),y=n.domain||((M,q,L)=>{if(Te(L,"phflag"),q.length||L)throw new Error("Contexts/pre-hash are not supported");return M});function $(M){return h.create(ye(M))}function A(M){const q=I.secretKey;mt(M,I.secretKey,"secretKey");const L=mt(e(M),2*q,"hashedSecretKey"),nt=d(L.slice(0,q)),W=L.slice(q,2*q),Q=$(nt);return{head:nt,prefix:W,scalar:Q}}function z(M){const{head:q,prefix:L,scalar:nt}=A(M),W=i.multiply(nt),Q=W.toBytes();return{head:q,prefix:L,scalar:nt,point:W,pointBytes:Q}}function H(M){return z(M).pointBytes}function G(M=Uint8Array.of(),...q){const L=wn(...q);return $(e(y(L,mt(M,void 0,"context"),!!r)))}function R(M,q,L={}){M=mt(M,void 0,"message"),r&&(M=r(M));const{prefix:nt,scalar:W,pointBytes:Q}=z(q),v=G(L.context,nt,M),m=i.multiply(v).toBytes(),p=G(L.context,m,Q,M),s=h.create(v+p*W);if(!h.isValid(s))throw new Error("sign failed: invalid s");const o=wn(m,h.toBytes(s));return mt(o,I.signature,"result")}const j={zip215:!0};function Y(M,q,L,nt=j){const{context:W,zip215:Q}=nt,v=I.signature;M=mt(M,v,"signature"),q=mt(q,void 0,"message"),L=mt(L,I.publicKey,"publicKey"),Q!==void 0&&Te(Q,"zip215"),r&&(q=r(q));const m=v/2,p=M.subarray(0,m),s=ye(M.subarray(m,v));let o,u,f;try{o=t.fromBytes(L,Q),u=t.fromBytes(p,Q),f=i.multiplyUnsafe(s)}catch{return!1}if(!Q&&o.isSmallOrder())return!1;const c=G(W,u.toBytes(),o.toBytes(),q);return u.add(o.multiplyUnsafe(c)).subtract(f).clearCofactor().is0()}const D=a.BYTES,I={secretKey:D,publicKey:D,signature:2*D,seed:D};function E(M=l(I.seed)){return mt(M,I.seed,"seed")}function k(M){return dn(M)&&M.length===h.BYTES}function N(M,q){try{return!!t.fromBytes(M,q)}catch{return!1}}const J={getExtendedPublicKey:z,randomSecretKey:E,isValidSecretKey:k,isValidPublicKey:N,toMontgomery(M){const{y:q}=t.fromBytes(M),L=I.publicKey,nt=L===32;if(!nt&&L!==57)throw new Error("only defined for 25519 and 448");const W=nt?a.div(bt+q,bt-q):a.div(q-bt,q+bt);return a.toBytes(W)},toMontgomerySecret(M){const q=I.secretKey;mt(M,q);const L=e(M.subarray(0,q));return d(L).subarray(0,q)}};return Object.freeze({keygen:pi(E,H),getPublicKey:H,sign:R,verify:Y,utils:J,Point:t,lengths:I})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const vi=BigInt(1),Zn=BigInt(2),_i=BigInt(5),xi=BigInt(8),Ge=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),Ai={p:Ge,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:xi,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function Si(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),i=BigInt(80),a=Ge,l=t*t%a*t%a,d=Mt(l,Zn,a)*l%a,y=Mt(d,vi,a)*t%a,$=Mt(y,_i,a)*y%a,A=Mt($,e,a)*$%a,z=Mt(A,n,a)*A%a,H=Mt(z,r,a)*z%a,G=Mt(H,i,a)*H%a,R=Mt(G,i,a)*H%a,j=Mt(R,e,a)*$%a;return{pow_p_5_8:Mt(j,Zn,a)*t%a,b2:l}}function Ei(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const Vn=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function Bi(t,e){const n=Ge,r=pt(e*e*e,n),i=pt(r*r*e,n),a=Si(t*i).pow_p_5_8;let h=pt(t*r*a,n);const l=pt(e*h*h,n),d=h,y=pt(h*Vn,n),$=l===t,A=l===pt(-t,n),z=l===pt(-t*Vn,n);return $&&(h=d),(A||z)&&(h=y),ai(h,n)&&(h=pt(-h,n)),{isValid:$||A,value:h}}const Ci=mi(Ai,{uvRatio:Bi});function Ii(t){return yi(Ci,Xr,Object.assign({adjustScalarBytes:Ei},t))}const Ze=Ii({}),ue="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";function le(t){if(!t||typeof t!="string")throw new Error(`Expected base58 string but got “${t}”`);if(t.match(/[IOl0]/gmu))throw new Error(`Invalid base58 character “${t.match(/[IOl0]/gmu)}”`);const e=t.match(/^1+/gmu),n=e?e[0].length:0,r=(t.length-n)*(Math.log(58)/Math.log(256))+1>>>0;return new Uint8Array([...new Uint8Array(n),...t.match(/.{1}/gmu).map(i=>ue.indexOf(i)).reduce((i,a)=>(i=i.map(h=>{const l=h*58+a;return a=l>>8,l}),i),new Uint8Array(r)).reverse().filter((i=>a=>i=i||a)(!1))])}const Oi=(()=>{const t=Array(256).fill(-1);for(let e=0;e<ue.length;++e)t[ue.charCodeAt(e)]=e;return t})();function Yn(t){const e=[];for(const n of t){let r=n;for(let i=0;i<e.length;++i){const a=(Oi[e[i]]<<8)+r;e[i]=ue.charCodeAt(a%58),r=a/58|0}for(;r;)e.push(ue.charCodeAt(r%58)),r=r/58|0}for(const n of t){if(n)break;e.push(49)}return e.reverse(),String.fromCharCode(...e)}var Mi=20,ki=1,Gt=1e6,Xn=1e6,Di=-7,qi=21,Ri=!1,de="[big.js] ",Zt=de+"Invalid ",xe=Zt+"decimal places",Ti=Zt+"rounding mode",Jn=de+"Division by zero",ct={},kt=void 0,$i=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function Wn(){function t(e){var n=this;if(!(n instanceof t))return e===kt&&arguments.length===0?Wn():new t(e);if(e instanceof t)n.s=e.s,n.e=e.e,n.c=e.c.slice();else{if(typeof e!="string"){if(t.strict===!0&&typeof e!="bigint")throw TypeError(Zt+"value");e=e===0&&1/e<0?"-0":String(e)}Ni(n,e)}n.constructor=t}return t.prototype=ct,t.DP=Mi,t.RM=ki,t.NE=Di,t.PE=qi,t.strict=Ri,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}function Ni(t,e){var n,r,i;if(!$i.test(e))throw Error(Zt+"number");for(t.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),i=e.length,r=0;r<i&&e.charAt(r)=="0";)++r;if(r==i)t.c=[t.e=0];else{for(;i>0&&e.charAt(--i)=="0";);for(t.e=n-r-1,t.c=[],n=0;r<=i;)t.c[n++]=+e.charAt(r++)}return t}function Vt(t,e,n,r){var i=t.c;if(n===kt&&(n=t.constructor.RM),n!==0&&n!==1&&n!==2&&n!==3)throw Error(Ti);if(e<1)r=n===3&&(r||!!i[0])||e===0&&(n===1&&i[0]>=5||n===2&&(i[0]>5||i[0]===5&&(r||i[1]!==kt))),i.length=1,r?(t.e=t.e-e+1,i[0]=1):i[0]=t.e=0;else if(e<i.length){if(r=n===1&&i[e]>=5||n===2&&(i[e]>5||i[e]===5&&(r||i[e+1]!==kt||i[e-1]&1))||n===3&&(r||!!i[0]),i.length=e,r){for(;++i[--e]>9;)if(i[e]=0,e===0){++t.e,i.unshift(1);break}}for(e=i.length;!i[--e];)i.pop()}return t}function Yt(t,e,n){var r=t.e,i=t.c.join(""),a=i.length;if(e)i=i.charAt(0)+(a>1?"."+i.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)i="0"+i;i="0."+i}else if(r>0)if(++r>a)for(r-=a;r--;)i+="0";else r<a&&(i=i.slice(0,r)+"."+i.slice(r));else a>1&&(i=i.charAt(0)+"."+i.slice(1));return t.s<0&&n?"-"+i:i}ct.abs=function(){var t=new this.constructor(this);return t.s=1,t},ct.cmp=function(t){var e,n=this,r=n.c,i=(t=new n.constructor(t)).c,a=n.s,h=t.s,l=n.e,d=t.e;if(!r[0]||!i[0])return r[0]?a:i[0]?-h:0;if(a!=h)return a;if(e=a<0,l!=d)return l>d^e?1:-1;for(h=(l=r.length)<(d=i.length)?l:d,a=-1;++a<h;)if(r[a]!=i[a])return r[a]>i[a]^e?1:-1;return l==d?0:l>d^e?1:-1},ct.div=function(t){var e=this,n=e.constructor,r=e.c,i=(t=new n(t)).c,a=e.s==t.s?1:-1,h=n.DP;if(h!==~~h||h<0||h>Gt)throw Error(xe);if(!i[0])throw Error(Jn);if(!r[0])return t.s=a,t.c=[t.e=0],t;var l,d,y,$,A,z=i.slice(),H=l=i.length,G=r.length,R=r.slice(0,l),j=R.length,Y=t,D=Y.c=[],I=0,E=h+(Y.e=e.e-t.e)+1;for(Y.s=a,a=E<0?0:E,z.unshift(0);j++<l;)R.push(0);do{for(y=0;y<10;y++){if(l!=(j=R.length))$=l>j?1:-1;else for(A=-1,$=0;++A<l;)if(i[A]!=R[A]){$=i[A]>R[A]?1:-1;break}if($<0){for(d=j==l?i:z;j;){if(R[--j]<d[j]){for(A=j;A&&!R[--A];)R[A]=9;--R[A],R[j]+=10}R[j]-=d[j]}for(;!R[0];)R.shift()}else break}D[I++]=$?y:++y,R[0]&&$?R[j]=r[H]||0:R=[r[H]]}while((H++<G||R[0]!==kt)&&a--);return!D[0]&&I!=1&&(D.shift(),Y.e--,E--),I>E&&Vt(Y,E,n.RM,R[0]!==kt),Y},ct.eq=function(t){return this.cmp(t)===0},ct.gt=function(t){return this.cmp(t)>0},ct.gte=function(t){return this.cmp(t)>-1},ct.lt=function(t){return this.cmp(t)<0},ct.lte=function(t){return this.cmp(t)<1},ct.minus=ct.sub=function(t){var e,n,r,i,a=this,h=a.constructor,l=a.s,d=(t=new h(t)).s;if(l!=d)return t.s=-d,a.plus(t);var y=a.c.slice(),$=a.e,A=t.c,z=t.e;if(!y[0]||!A[0])return A[0]?t.s=-d:y[0]?t=new h(a):t.s=1,t;if(l=$-z){for((i=l<0)?(l=-l,r=y):(z=$,r=A),r.reverse(),d=l;d--;)r.push(0);r.reverse()}else for(n=((i=y.length<A.length)?y:A).length,l=d=0;d<n;d++)if(y[d]!=A[d]){i=y[d]<A[d];break}if(i&&(r=y,y=A,A=r,t.s=-t.s),(d=(n=A.length)-(e=y.length))>0)for(;d--;)y[e++]=0;for(d=e;n>l;){if(y[--n]<A[n]){for(e=n;e&&!y[--e];)y[e]=9;--y[e],y[n]+=10}y[n]-=A[n]}for(;y[--d]===0;)y.pop();for(;y[0]===0;)y.shift(),--z;return y[0]||(t.s=1,y=[z=0]),t.c=y,t.e=z,t},ct.mod=function(t){var e,n=this,r=n.constructor,i=n.s,a=(t=new r(t)).s;if(!t.c[0])throw Error(Jn);return n.s=t.s=1,e=t.cmp(n)==1,n.s=i,t.s=a,e?new r(n):(i=r.DP,a=r.RM,r.DP=r.RM=0,n=n.div(t),r.DP=i,r.RM=a,this.minus(n.times(t)))},ct.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t},ct.plus=ct.add=function(t){var e,n,r,i=this,a=i.constructor;if(t=new a(t),i.s!=t.s)return t.s=-t.s,i.minus(t);var h=i.e,l=i.c,d=t.e,y=t.c;if(!l[0]||!y[0])return y[0]||(l[0]?t=new a(i):t.s=i.s),t;if(l=l.slice(),e=h-d){for(e>0?(d=h,r=y):(e=-e,r=l),r.reverse();e--;)r.push(0);r.reverse()}for(l.length-y.length<0&&(r=y,y=l,l=r),e=y.length,n=0;e;l[e]%=10)n=(l[--e]=l[e]+y[e]+n)/10|0;for(n&&(l.unshift(n),++d),e=l.length;l[--e]===0;)l.pop();return t.c=l,t.e=d,t},ct.pow=function(t){var e=this,n=new e.constructor("1"),r=n,i=t<0;if(t!==~~t||t<-Xn||t>Xn)throw Error(Zt+"exponent");for(i&&(t=-t);t&1&&(r=r.times(e)),t>>=1,!!t;)e=e.times(e);return i?n.div(r):r},ct.prec=function(t,e){if(t!==~~t||t<1||t>Gt)throw Error(Zt+"precision");return Vt(new this.constructor(this),t,e)},ct.round=function(t,e){if(t===kt)t=0;else if(t!==~~t||t<-Gt||t>Gt)throw Error(xe);return Vt(new this.constructor(this),t+this.e+1,e)},ct.sqrt=function(){var t,e,n,r=this,i=r.constructor,a=r.s,h=r.e,l=new i("0.5");if(!r.c[0])return new i(r);if(a<0)throw Error(de+"No square root");a=Math.sqrt(+Yt(r,!0,!0)),a===0||a===1/0?(e=r.c.join(""),e.length+h&1||(e+="0"),a=Math.sqrt(e),h=((h+1)/2|0)-(h<0||h&1),t=new i((a==1/0?"5e":(a=a.toExponential()).slice(0,a.indexOf("e")+1))+h)):t=new i(a+""),h=t.e+(i.DP+=4);do n=t,t=l.times(n.plus(r.div(n)));while(n.c.slice(0,h).join("")!==t.c.slice(0,h).join(""));return Vt(t,(i.DP-=4)+t.e+1,i.RM)},ct.times=ct.mul=function(t){var e,n=this,r=n.constructor,i=n.c,a=(t=new r(t)).c,h=i.length,l=a.length,d=n.e,y=t.e;if(t.s=n.s==t.s?1:-1,!i[0]||!a[0])return t.c=[t.e=0],t;for(t.e=d+y,h<l&&(e=i,i=a,a=e,y=h,h=l,l=y),e=new Array(y=h+l);y--;)e[y]=0;for(d=l;d--;){for(l=0,y=h+d;y>d;)l=e[y]+a[d]*i[y-d-1]+l,e[y--]=l%10,l=l/10|0;e[y]=l}for(l?++t.e:e.shift(),d=e.length;!e[--d];)e.pop();return t.c=e,t},ct.toExponential=function(t,e){var n=this,r=n.c[0];if(t!==kt){if(t!==~~t||t<0||t>Gt)throw Error(xe);for(n=Vt(new n.constructor(n),++t,e);n.c.length<t;)n.c.push(0)}return Yt(n,!0,!!r)},ct.toFixed=function(t,e){var n=this,r=n.c[0];if(t!==kt){if(t!==~~t||t<0||t>Gt)throw Error(xe);for(n=Vt(new n.constructor(n),t+n.e+1,e),t=t+n.e+1;n.c.length<t;)n.c.push(0)}return Yt(n,!1,!!r)},ct.toJSON=ct.toString=function(){var t=this,e=t.constructor;return Yt(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])},typeof Symbol<"u"&&(ct[Symbol.for("nodejs.util.inspect.custom")]=ct.toJSON),ct.toNumber=function(){var t=+Yt(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(t.toString()))throw Error(de+"Imprecise conversion");return t},ct.toPrecision=function(t,e){var n=this,r=n.constructor,i=n.c[0];if(t!==kt){if(t!==~~t||t<1||t>Gt)throw Error(Zt+"precision");for(n=Vt(new r(n),t,e);n.c.length<t;)n.c.push(0)}return Yt(n,t<=n.e||n.e<=r.NE||n.e>=r.PE,!!i)},ct.valueOf=function(){var t=this,e=t.constructor;if(e.strict===!0)throw Error(de+"valueOf disallowed");return Yt(t,t.e<=e.NE||t.e>=e.PE,!0)};var Dt=Wn();const ne=typeof Buffer=="function",Qn=typeof TextDecoder=="function"?new TextDecoder:void 0,tr=typeof TextEncoder=="function"?new TextEncoder:void 0,fe=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),Ae=(t=>{let e={};return t.forEach((n,r)=>e[n]=r),e})(fe),Pi=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,yt=String.fromCharCode.bind(String),er=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):t=>new Uint8Array(Array.prototype.slice.call(t,0)),nr=t=>t.replace(/=/g,"").replace(/[+\/]/g,e=>e=="+"?"-":"_"),rr=t=>t.replace(/[^A-Za-z0-9\+\/]/g,""),ir=typeof btoa=="function"?t=>btoa(t):ne?t=>Buffer.from(t,"binary").toString("base64"):t=>{let e,n,r,i,a="";const h=t.length%3;for(let l=0;l<t.length;){if((n=t.charCodeAt(l++))>255||(r=t.charCodeAt(l++))>255||(i=t.charCodeAt(l++))>255)throw new TypeError("invalid character found");e=n<<16|r<<8|i,a+=fe[e>>18&63]+fe[e>>12&63]+fe[e>>6&63]+fe[e&63]}return h?a.slice(0,h-3)+"===".substring(h):a},Ve=ne?t=>Buffer.from(t).toString("base64"):t=>{let n=[];for(let r=0,i=t.length;r<i;r+=4096)n.push(yt.apply(null,t.subarray(r,r+4096)));return ir(n.join(""))},zi=(t,e=!1)=>e?nr(Ve(t)):Ve(t),ji=t=>{if(t.length<2){var e=t.charCodeAt(0);return e<128?t:e<2048?yt(192|e>>>6)+yt(128|e&63):yt(224|e>>>12&15)+yt(128|e>>>6&63)+yt(128|e&63)}else{var e=65536+(t.charCodeAt(0)-55296)*1024+(t.charCodeAt(1)-56320);return yt(240|e>>>18&7)+yt(128|e>>>12&63)+yt(128|e>>>6&63)+yt(128|e&63)}},Li=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,Ui=t=>t.replace(Li,ji),or=ne?t=>Buffer.from(t,"utf8").toString("base64"):tr?t=>Ve(tr.encode(t)):t=>ir(Ui(t)),Ki=(t,e=!1)=>e?nr(or(t)):or(t),Fi=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,Hi=t=>{switch(t.length){case 4:var e=(7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3),n=e-65536;return yt((n>>>10)+55296)+yt((n&1023)+56320);case 3:return yt((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return yt((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},Gi=t=>t.replace(Fi,Hi),sr=typeof atob=="function"?t=>atob(rr(t)):ne?t=>Buffer.from(t,"base64").toString("binary"):t=>{if(t=t.replace(/\s+/g,""),!Pi.test(t))throw new TypeError("malformed base64.");t+="==".slice(2-(t.length&3));let e,n,r,i=[];for(let a=0;a<t.length;)e=Ae[t.charAt(a++)]<<18|Ae[t.charAt(a++)]<<12|(n=Ae[t.charAt(a++)])<<6|(r=Ae[t.charAt(a++)]),n===64?i.push(yt(e>>16&255)):r===64?i.push(yt(e>>16&255,e>>8&255)):i.push(yt(e>>16&255,e>>8&255,e&255));return i.join("")},ar=ne?t=>er(Buffer.from(t,"base64")):t=>er(sr(t).split("").map(e=>e.charCodeAt(0))),Zi=t=>ar(cr(t)),Vi=ne?t=>Buffer.from(t,"base64").toString("utf8"):Qn?t=>Qn.decode(ar(t)):t=>Gi(sr(t)),cr=t=>rr(t.replace(/[-_]/g,e=>e=="-"?"+":"/")),Yi=t=>Vi(cr(t));var Xi=Object.defineProperty,qt=(t,e)=>Xi(t,"name",{value:e,configurable:!0});const Ye="__fastnear_",Ji=qt(()=>typeof localStorage<"u"?localStorage:{getItem:qt(t=>Se.get(t)||null,"getItem"),setItem:qt((t,e)=>Se.set(t,e),"setItem"),removeItem:qt(t=>Se.delete(t),"removeItem"),clear:qt(()=>Se.clear(),"clear")},"createDefaultStorage"),Se=new Map;let re=Ji();const ur={setBackend:qt(t=>{re=t},"setBackend"),set:qt((t,e)=>{e==null?re.removeItem(Ye+t):re.setItem(Ye+t,JSON.stringify(e))},"set"),get:qt(t=>{const e=re.getItem(Ye+t);if(e===null)return null;try{return JSON.parse(e)}catch{return e}},"get"),remove:qt(t=>re.removeItem(t),"remove"),clear:qt(()=>re.clear(),"clear")};var Wi=Object.defineProperty,Ct=(t,e)=>Wi(t,"name",{value:e,configurable:!0});function Qi(t){return Array.from(t).map(e=>e.toString(16).padStart(2,"0")).join("")}Ct(Qi,"toHex");function to(t){if(t.length%2)throw new Error("Hex string must be even length");const e=new Uint8Array(t.length/2);for(let n=0;n<t.length;n+=2)e[n/2]=parseInt(t.slice(n,n+2),16);return e}Ct(to,"fromHex");function Ee(t){return Zi(t)}Ct(Ee,"base64ToBytes");function eo(t){return zi(t)}Ct(eo,"bytesToBase64");function no(t){try{return Ki(t)}catch(e){return console.error("Issue base64 encoding",e),null}}Ct(no,"toBase64");function ro(t){try{return Yi(t)}catch(e){return console.error("Issue base64 decoding",e),null}}Ct(ro,"fromBase64");function io(t,...e){if(Array.isArray(t)&&(t=t.reduce((n,r,i)=>n+(e[i-1]??"")+r)),typeof t=="string"){const n=t.match(/([0-9.,_]+)\s*([a-zA-Z]+)?/);if(n){const r=n[1].replace(/[_,]/g,""),i=n[2];if(i)switch(i.toLowerCase()){case"near":return Dt(r).mul(Dt(10).pow(24)).toFixed(0);case"tgas":return Dt(r).mul(Dt(10).pow(12)).toFixed(0);case"ggas":return Dt(r).mul(Dt(10).pow(9)).toFixed(0);case"gas":case"yoctonear":return Dt(r).toFixed(0);default:throw new Error(`Unknown unit: ${i}`)}else return Dt(r).toFixed(0)}}return Dt(`${t}`).toFixed(0)}Ct(io,"convertUnit");function oo(t,e){ur.set(t,e)}Ct(oo,"lsSet");function so(t){return ur.get(t)}Ct(so,"lsGet");function ao(t){return JSON.parse(JSON.stringify(t))}Ct(ao,"deepCopy");function co(...t){try{return JSON.parse(t[0])}catch{return t.length>1?t[1]:t[0]}}Ct(co,"tryParseJson");function uo(t){try{const e=new TextDecoder;return JSON.parse(e.decode(t instanceof Uint8Array?t:new Uint8Array(t)))}catch{try{return t instanceof Uint8Array?t:new Uint8Array(t)}catch{return t}}}Ct(uo,"parseJsonFromBytes");function lo(t){var e;return t.length===1&&t[0].type==="FunctionCall"&&Dt(((e=t[0])==null?void 0:e.deposit)??"0").eq(0)}Ct(lo,"canSignWithLAK");var fo=Object.defineProperty,ie=(t,e)=>fo(t,"name",{value:e,configurable:!0});const Xt=ie(t=>le(t.includes(":")?(()=>{const[e,n]=t.split(":");if(e!=="ed25519")throw new Error(`Unsupported curve: ${e}`);return n})():t),"keyFromString"),lr=ie(t=>`ed25519:${Yn(t)}`,"keyToString");function Be(t){const e=Xt(t).slice(0,32),n=Ze.getPublicKey(e);return lr(n)}ie(Be,"publicKeyFromPrivate");function dr(){const t=crypto.getRandomValues(new Uint8Array(64));return lr(t)}ie(dr,"privateKeyFromRandom");function fr(t,e,n){const r=Xt(e).slice(0,32),i=Ze.sign(t,r);return n!=null&&n.returnBase58?Yn(i):i}ie(fr,"signHash");function ho(t,e){const n=Sn(t);return fr(n,e)}ie(ho,"signBytes");var go=Object.defineProperty,hr=(t,e)=>go(t,"name",{value:e,configurable:!0});const po=new(ae=class{constructor(){C(this,"Ed25519Signature",{struct:{data:{array:{type:"u8",len:64}}}});C(this,"Secp256k1Signature",{struct:{data:{array:{type:"u8",len:65}}}});C(this,"Signature",{enum:[{struct:{ed25519Signature:this.Ed25519Signature}},{struct:{secp256k1Signature:this.Secp256k1Signature}}]});C(this,"Ed25519Data",{struct:{data:{array:{type:"u8",len:32}}}});C(this,"Secp256k1Data",{struct:{data:{array:{type:"u8",len:64}}}});C(this,"PublicKey",{enum:[{struct:{ed25519Key:this.Ed25519Data}},{struct:{secp256k1Key:this.Secp256k1Data}}]});C(this,"FunctionCallPermission",{struct:{allowance:{option:"u128"},receiverId:"string",methodNames:{array:{type:"string"}}}});C(this,"FullAccessPermission",{struct:{}});C(this,"AccessKeyPermission",{enum:[{struct:{functionCall:this.FunctionCallPermission}},{struct:{fullAccess:this.FullAccessPermission}}]});C(this,"AccessKey",{struct:{nonce:"u64",permission:this.AccessKeyPermission}});C(this,"CreateAccount",{struct:{}});C(this,"DeployContract",{struct:{code:{array:{type:"u8"}}}});C(this,"FunctionCall",{struct:{methodName:"string",args:{array:{type:"u8"}},gas:"u64",deposit:"u128"}});C(this,"Transfer",{struct:{deposit:"u128"}});C(this,"Stake",{struct:{stake:"u128",publicKey:this.PublicKey}});C(this,"AddKey",{struct:{publicKey:this.PublicKey,accessKey:this.AccessKey}});C(this,"DeleteKey",{struct:{publicKey:this.PublicKey}});C(this,"DeleteAccount",{struct:{beneficiaryId:"string"}});C(this,"ClassicAction",{enum:[{struct:{createAccount:this.CreateAccount}},{struct:{deployContract:this.DeployContract}},{struct:{functionCall:this.FunctionCall}},{struct:{transfer:this.Transfer}},{struct:{stake:this.Stake}},{struct:{addKey:this.AddKey}},{struct:{deleteKey:this.DeleteKey}},{struct:{deleteAccount:this.DeleteAccount}}]});C(this,"DelegateAction",{struct:{senderId:"string",receiverId:"string",actions:{array:{type:this.ClassicAction}},nonce:"u64",maxBlockHeight:"u64",publicKey:this.PublicKey}});C(this,"SignedDelegate",{struct:{delegateAction:this.DelegateAction,signature:this.Signature}});C(this,"Action",{enum:[{struct:{createAccount:this.CreateAccount}},{struct:{deployContract:this.DeployContract}},{struct:{functionCall:this.FunctionCall}},{struct:{transfer:this.Transfer}},{struct:{stake:this.Stake}},{struct:{addKey:this.AddKey}},{struct:{deleteKey:this.DeleteKey}},{struct:{deleteAccount:this.DeleteAccount}},{struct:{signedDelegate:this.SignedDelegate}}]});C(this,"Transaction",{struct:{signerId:"string",publicKey:this.PublicKey,nonce:"u64",receiverId:"string",blockHash:{array:{type:"u8",len:32}},actions:{array:{type:this.Action}}}});C(this,"SignedTransaction",{struct:{transaction:this.Transaction,signature:this.Signature}})}},hr(ae,"BorshSchema"),ae),wo=hr(()=>po,"getBorshSchema");var bo=Object.defineProperty,Ce=(t,e)=>bo(t,"name",{value:e,configurable:!0});function Xe(t){return{signerId:t.signerId,publicKey:{ed25519Key:{data:Xt(t.publicKey)}},nonce:BigInt(t.nonce),receiverId:t.receiverId,blockHash:le(t.blockHash),actions:t.actions.map(Je)}}Ce(Xe,"mapTransaction");function mo(t){console.log("fastnear: serializing transaction");const e=Xe(t);return console.log("fastnear: mapped transaction for borsh:",e),ke(gr.Transaction,e)}Ce(mo,"serializeTransaction");function yo(t,e){console.log("fastnear: Serializing Signed Transaction",t),console.log("fastnear: signature",e),console.log("fastnear: signature length",le(e).length);const n=Xe(t);console.log("fastnear: mapped (for borsh schema) signed transaction",n);const r={transaction:n,signature:{ed25519Signature:{data:le(e)}}},i=ke(gr.SignedTransaction,r,!0);return console.log("fastnear: borsh-serialized signed transaction:",i),i}Ce(yo,"serializeSignedTransaction");function Je(t){switch(t.type){case"CreateAccount":return{createAccount:{}};case"DeployContract":return{deployContract:{code:Ee(t.codeBase64)}};case"FunctionCall":return{functionCall:{methodName:t.methodName,args:t.argsBase64!==null&&t.argsBase64!==void 0?Ee(t.argsBase64):new TextEncoder().encode(JSON.stringify(t.args)),gas:BigInt(t.gas??"300000000000000"),deposit:BigInt(t.deposit??"0")}};case"Transfer":return{transfer:{deposit:BigInt(t.deposit)}};case"Stake":return{stake:{stake:BigInt(t.stake),publicKey:{ed25519Key:{data:Xt(t.publicKey)}}}};case"AddKey":return{addKey:{publicKey:{ed25519Key:{data:Xt(t.publicKey)}},accessKey:{nonce:BigInt(t.accessKey.nonce),permission:t.accessKey.permission==="FullAccess"?{fullAccess:{}}:{functionCall:{allowance:t.accessKey.allowance?BigInt(t.accessKey.allowance):null,receiverId:t.accessKey.receiverId,methodNames:t.accessKey.methodNames}}}}};case"DeleteKey":return{deleteKey:{publicKey:{ed25519Key:{data:Xt(t.publicKey)}}}};case"DeleteAccount":return{deleteAccount:{beneficiaryId:t.beneficiaryId}};case"SignedDelegate":return{signedDelegate:{delegateAction:Je(t.delegateAction),signature:{ed25519Signature:le(t.signature)}}};default:throw new Error("Not implemented action: "+t.type)}}Ce(Je,"mapAction");const gr=wo();var vo=Object.defineProperty,pr=(t,e)=>vo(t,"name",{value:e,configurable:!0});const nn=class nn extends Error{constructor(n,r,i){super(r);C(this,"code");C(this,"cause");C(this,"details");this.name="TransportError",this.code=n,this.cause=i==null?void 0:i.cause,this.details=i==null?void 0:i.details}};pr(nn,"TransportError");let ut=nn;const rn=class rn extends Error{constructor(n,r,i){super(r);C(this,"code");C(this,"cause");C(this,"details");this.name="UserRejectedError",this.code=n,this.cause=i==null?void 0:i.cause,this.details=i==null?void 0:i.details}};pr(rn,"UserRejectedError");let Ie=rn;var _o=Object.defineProperty,We=(t,e)=>_o(t,"name",{value:e,configurable:!0});const wr={mainnet:["https://relmn.aurora.dev","https://nearrpc.aurora.dev","https://rpc.mainnet.near.org"],testnet:["https://rpc.testnet.near.org"]},xo=We(t=>new Promise(e=>setTimeout(e,t)),"wait");let Ao=1e3;const on=class on{constructor(e,n=3e4){C(this,"providers");C(this,"index",0);C(this,"timeoutMs");C(this,"startTimeoutMs");this.providers=e.length>0?e:wr.mainnet,this.timeoutMs=n,this.startTimeoutMs=n}async block(e){return this.sendJsonRpc("block",e)}async query(e){return this.sendJsonRpc("query",e)}async txStatus(e,n,r){return this.sendJsonRpc("tx",{tx_hash:e,sender_account_id:n,wait_until:r})}async sendJsonRpc(e,n,r=0){const i=this.providers[this.index];try{const a=await this.send(i,e,n,this.timeoutMs);return this.timeoutMs=Math.max(this.startTimeoutMs,Math.floor(this.timeoutMs/1.2)),a}catch(a){const h=r+1>=this.providers.length*3;if(this.index=(this.index+1)%this.providers.length,this.timeoutMs=Math.min(6e4,Math.floor(this.timeoutMs*1.2)),h)throw a;return await xo(Math.min(500*(r+1),3e3)),this.sendJsonRpc(e,n,r+1)}}async send(e,n,r,i){const a=new AbortController,h=setTimeout(()=>a.abort(),i);try{const l=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:Ao++,method:n,params:r}),signal:a.signal});if(!l.ok){const y=await l.text().catch(()=>"Unknown RPC error");throw new ut("RPC_HTTP_ERROR",`RPC request failed (${l.status}): ${y}`)}const d=await l.json();if(d.error){const y=typeof d.error.data=="string"?d.error.data:d.error.message??"RPC error";throw new ut("RPC_RESPONSE_ERROR",y,{details:d.error})}return d.result}catch(l){throw a.signal.aborted?new ut("RPC_TIMEOUT","RPC request timed out",{cause:l}):l instanceof ut?l:new ut("RPC_NETWORK_ERROR","RPC network request failed",{cause:l})}finally{clearTimeout(h)}}};We(on,"NearRpcClient");let Qe=on;const So=We(t=>{const e={};return n=>{if(e[n]!=null)return e[n];const r=t==null?void 0:t(n);return e[n]=new Qe(r&&r.length>0?r:wr[n]),e[n]}},"createRpcFactory");var Eo=Object.defineProperty,Rt=(t,e)=>Eo(t,"name",{value:e,configurable:!0});const Bo=Rt(()=>typeof window<"u"&&window.localStorage!=null,"isStorageAvailable"),Co=Rt(()=>{if(!Bo()){const t=new Map;return{get:Rt(e=>t.get(e)??null,"get"),set:Rt((e,n)=>{t.set(e,n)},"set"),remove:Rt(e=>{t.delete(e)},"remove")}}return{get:Rt(t=>window.localStorage.getItem(t),"get"),set:Rt((t,e)=>window.localStorage.setItem(t,e),"set"),remove:Rt(t=>window.localStorage.removeItem(t),"remove")}},"createDefaultStorage"),Io=Rt(async(t,e,n)=>{try{const r=await t.get(e);return r==null?n:JSON.parse(r)}catch{return n}},"readJson"),Oo=Rt(async(t,e,n)=>{await t.set(e,JSON.stringify(n))},"writeJson");var Mo=Object.defineProperty,Oe=(t,e)=>Mo(t,"name",{value:e,configurable:!0});const br=Oe(t=>new Promise(e=>setTimeout(e,t)),"sleep"),ko=Oe(async(t,e)=>{if(typeof document>"u"||!document.hidden)return;const n=Date.now();for(;document.hidden;){if(Date.now()-n>=e)throw new ut("VISIBILITY_TIMEOUT","Browser tab stayed hidden for too long while polling");await br(t)}},"waitUntilVisible"),Do=Oe(async(t,e,n)=>{let r;try{return await Promise.race([t,new Promise((i,a)=>{r=setTimeout(()=>{a(new ut(n,`Operation timed out after ${e}ms`))},e)})])}finally{r!=null&&clearTimeout(r)}},"withTimeout"),mr=Oe(async(t,e,n)=>{const r=Date.now();let i=0,a=n.delayMs;for(;;){if(Date.now()-r>n.requestTimeoutMs)throw new ut("POLLING_TIMEOUT","Polling timed out");await ko(n.backgroundVisibilityCheckIntervalMs,n.backgroundVisibilityCheckTimeoutMs);const h=await Do(t(),n.requestCallTimeoutMs,"POLLING_REQUEST_TIMEOUT");if(!e(h))return h;if(i>=n.maxIterations)throw new ut("POLLING_MAX_ITERATIONS","Polling reached the maximum number of iterations");await br(a),a=Math.min(5e3,Math.ceil(a*1.15)),i+=1}},"visibilityAwarePoll"),qo={delayMs:1e3,maxIterations:1e3,requestTimeoutMs:10*60*1e3,backgroundVisibilityCheckIntervalMs:1e3,backgroundVisibilityCheckTimeoutMs:10*60*1e3,requestCallTimeoutMs:3e4};var Ro=Object.defineProperty,ft=(t,e)=>Ro(t,"name",{value:e,configurable:!0});const To="https://near-mobile-signer-backend_production.peersyst.tech",$o="near-mobile-wallet://sign",No="session",Po=2147484061,he=ft(t=>{if(t!=="mainnet"&&t!=="testnet")throw new ut("INVALID_NETWORK",`Unsupported network: ${t}`);return t},"ensureNetwork"),oe=ft((t,e,n)=>t instanceof ut||t instanceof Ie?t:t instanceof Error?new ut(e,t.message,{cause:t}):new ut(e,n,{details:t}),"normalizeError"),zo={struct:{tag:"u32",message:"string",nonce:{array:{type:"u8",len:32}},recipient:"string",callbackUrl:{option:"string"}}},jo=ft(({publicKey:t,signature:e,message:n,nonce:r,recipient:i,callbackUrl:a})=>{const h=ke(zo,{tag:Po,message:n,nonce:Uint8Array.from(r),recipient:i,callbackUrl:a??null}),l=Sn(new Uint8Array(h)),d=Xt(t),y=Ee(e);return Ze.verify(y,l,d)},"verifyNep413Signature"),sn=class sn{constructor(e,n=No){C(this,"storage");C(this,"key");this.storage=e,this.key=n}defaultState(){return{mainnet:{activeAccount:null,accounts:{}},testnet:{activeAccount:null,accounts:{}}}}async get(){return Io(this.storage,this.key,this.defaultState())}async set(e){await Oo(this.storage,this.key,e)}async getKey(e,n){var a;const i=(a=(await this.get())[e])==null?void 0:a.accounts[n];if(i==null)throw new ut("ACCOUNT_KEY_NOT_FOUND","Account key not found in session storage");return i}async setKey(e,n,r){const i=await this.get();i[e].accounts[n]=r,await this.set(i)}async removeKey(e,n){const r=await this.get();r[e].activeAccount===n&&(r[e].activeAccount=null),delete r[e].accounts[n],await this.set(r)}async getActiveAccount(e){return(await this.get())[e].activeAccount??null}async setActiveAccount(e,n){const r=await this.get();if(!Object.prototype.hasOwnProperty.call(r[e].accounts,n))throw new ut("INVALID_ACCOUNT_ID","Cannot set active account that does not exist in session storage");r[e].activeAccount=n,await this.set(r)}async getAccounts(e){const n=await this.get();return Object.keys(n[e].accounts)}};ft(sn,"SessionRepository");let tn=sn;const an=class an{constructor(e,n){C(this,"backendUrl");C(this,"fetcher");this.backendUrl=e.replace(/\/$/,""),this.fetcher=n??fetch}async request(e,n={},r=3e4){const i=new AbortController,a=setTimeout(()=>i.abort(),r);try{const h=await this.fetcher(`${this.backendUrl}${e}`,{...n,headers:{"Content-Type":"application/json",...n.headers??{}},signal:i.signal});if(!h.ok){const l=await h.text().catch(()=>"Unknown API error");throw new ut("API_HTTP_ERROR",`Near Mobile backend request failed (${h.status}): ${l}`)}return h.status===204?void 0:await h.json()}catch(h){throw i.signal.aborted?new ut("API_TIMEOUT","Near Mobile backend request timed out",{cause:h}):h instanceof ut?h:new ut("API_NETWORK_ERROR","Near Mobile backend request failed",{cause:h})}finally{clearTimeout(a)}}async createRequest(e,n,r){return this.request("/api/signer-request",{method:"POST",body:JSON.stringify({network:e,transactions:n,dAppMetadata:r})})}async getRequestStatus(e){return this.request(`/api/signer-request/${e}/status`,{method:"GET"})}async getRequest(e){return this.request(`/api/signer-request/${e}`,{method:"GET"})}async rejectRequest(e){await this.request(`/api/signer-request/${e}/reject`,{method:"POST"})}async createSignMessageRequest(e,n,r,i,a,h){return this.request("/api/signer-request/message",{method:"POST",body:JSON.stringify({network:e,message:n,receiver:r,nonce:i,callbackUrl:a,receiverMetadata:h})})}async getSignMessageRequest(e){return this.request(`/api/signer-request/message/${e}`,{method:"GET"})}async rejectSignMessageRequest(e){await this.request(`/api/signer-request/message/${e}/reject`,{method:"POST"})}};ft(an,"NearMobileApiClient");let en=an;const Lo=ft((t,e)=>e.map(n=>{const r=n.signerId??t;if(r==null)throw new ut("MISSING_SIGNER_ID","Missing signer id for transaction");return{signerId:r,receiverId:n.receiverId,actions:n.actions}}),"normalizeTransactions"),Uo=ft((t={})=>{const e=t.storage??Co(),n=new tn(e),r=t.signerBackendUrl??To,i=t.nearMobileWalletUrl??$o,a=new en(r,t.fetcher),h=So(t.getNetworkProviders),l={...qo,...t.polling??{}},d=ft(E=>{var k;return(k=t.onError)==null?void 0:k.call(t,E)},"emitError"),y=ft(E=>{var k;(k=t.onRequested)==null||k.call(t,{...E,requestUrl:`${i}/${E.kind}/${E.id}`})},"emitRequested"),$=ft(async E=>mr(()=>a.getRequestStatus(E),({status:k})=>k==="pending",l),"awaitRequestStatus"),A=ft(async E=>mr(()=>a.getSignMessageRequest(E),({status:k,response:N})=>k==="pending"&&N==null,l),"awaitMessageStatus"),z=ft((E,k)=>{var N;if(E==="approved"){(N=t.onApproved)==null||N.call(t);return}if(E==="rejected")throw new Ie("USER_REJECTED",k)},"handleRejectedStatus"),H=ft(async(E,k,N)=>{const M=await h(E).query({request_type:"view_access_key",finality:"optimistic",account_id:k,public_key:N});if((M==null?void 0:M.permission)!=="FullAccess")throw new ut("INVALID_ACCESS_KEY","Signer key is not a full access key")},"ensureFullAccessKey"),G=ft(async E=>{const k=he(E),N=await n.getAccounts(k),J=[];for(const M of N){const q=await n.getKey(k,M);J.push({accountId:M,publicKey:Be(q)})}return J},"getAccounts"),R=ft(async({network:E,contractId:k,methodNames:N=[],allowance:J})=>{var s;const M=he(E),q=dr(),L=Be(q),nt=k!=null?{receiverId:k,methodNames:N,...J?{allowance:J}:{}}:"FullAccess",{id:W,network:Q,requests:v}=await a.createRequest(M,[{actions:[{type:"AddKey",params:{publicKey:L,accessKey:{permission:nt}}}]}],t.metadata);y({id:W,kind:"request",network:Q,request:v,close:ft(async()=>a.rejectRequest(W),"close")});const{status:m}=await $(W);z(m,"User rejected Near Mobile sign-in");const p=await a.getRequest(W);if(p.signerAccountId==null)throw new ut("REQUEST_NOT_SIGNED","Signer request was approved but did not return signer account id");return await n.setKey(M,p.signerAccountId,q),await n.setActiveAccount(M,p.signerAccountId),(s=t.onSuccess)==null||s.call(t),G(M)},"signIn"),j=ft(async({network:E})=>{var Q;const k=he(E),N=await n.getActiveAccount(k);if(N==null)return;const J=await n.getKey(k,N),M=Be(J),{id:q,network:L,requests:nt}=await a.createRequest(k,[{signerId:N,receiverId:N,actions:[{type:"DeleteKey",params:{publicKey:M}}]}],t.metadata);y({id:q,kind:"request",network:L,request:nt,close:ft(async()=>a.rejectRequest(q),"close")});const{status:W}=await $(q);z(W,"User rejected Near Mobile sign-out"),await n.removeKey(k,N),(Q=t.onSuccess)==null||Q.call(t)},"signOut"),Y=ft(async({network:E,signerId:k,transactions:N})=>{var o;const J=he(E),M=k??await n.getActiveAccount(J)??void 0,q=Lo(M,N),{id:L,network:nt,requests:W}=await a.createRequest(J,q,t.metadata);y({id:L,kind:"request",network:nt,request:W,close:ft(async()=>a.rejectRequest(L),"close")});const{status:Q}=await $(L);z(Q,"User rejected Near Mobile transaction signing");const v=await a.getRequest(L);if(!v.txHash||v.txHash.length===0)throw new ut("REQUEST_NOT_SIGNED","Near Mobile request did not include transaction hashes");const m=v.signerAccountId??q[0].signerId,p=h(J),s=[];for(const u of v.txHash)s.push(await p.txStatus(u,m,"EXECUTED_OPTIMISTIC"));return(o=t.onSuccess)==null||o.call(t),s},"signAndSendTransactions"),D=ft(async({network:E,signerId:k,receiverId:N,actions:J})=>(await Y({network:E,signerId:k,transactions:[{receiverId:N,actions:J,signerId:k}]}))[0],"signAndSendTransaction"),I=ft(async({network:E,message:k,nonce:N,recipient:J,callbackUrl:M})=>{var s;const q=he(E),{id:L,network:nt}=await a.createSignMessageRequest(q,k,J,Array.from(N),M,t.metadata);y({id:L,kind:"message",network:nt,request:{message:k,nonce:N,recipient:J,callbackUrl:M},close:ft(async()=>a.rejectSignMessageRequest(L),"close")});const W=await A(L);if(z(W.status,"User rejected Near Mobile message signing"),W.response==null)throw new ut("NO_SIGNATURE","Near Mobile message request was approved without a signature");const{accountId:Q,publicKey:v,signature:m}=W.response;if(!jo({publicKey:v,signature:m,message:k,nonce:N,recipient:J,callbackUrl:M}))throw new ut("INVALID_SIGNATURE","Near Mobile returned an invalid message signature");return await H(q,Q,v),(s=t.onSuccess)==null||s.call(t),{accountId:Q,publicKey:v,signature:m}},"signMessage");return{async signIn(E){try{return await R(E)}catch(k){const N=oe(k,"SIGN_IN_FAILED","Near Mobile sign-in failed");throw d(N),N}},async signOut({network:E}){try{return await j({network:E})}catch(k){const N=oe(k,"SIGN_OUT_FAILED","Near Mobile sign-out failed");throw d(N),N}},async getAccounts({network:E}){try{return await G(E)}catch(k){const N=oe(k,"GET_ACCOUNTS_FAILED","Near Mobile getAccounts failed");throw d(N),N}},async signMessage(E){try{return await I(E)}catch(k){const N=oe(k,"SIGN_MESSAGE_FAILED","Near Mobile signMessage failed");throw d(N),N}},async signAndSendTransaction(E){try{return await D(E)}catch(k){const N=oe(k,"SIGN_TX_FAILED","Near Mobile signAndSendTransaction failed");throw d(N),N}},async signAndSendTransactions(E){try{return await Y(E)}catch(k){const N=oe(k,"SIGN_TXS_FAILED","Near Mobile signAndSendTransactions failed");throw d(N),N}}}},"createNearMobileAdapter");var Ko=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Fo(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var yr={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(Ko,()=>(()=>{var n={873:(h,l)=>{var d,y,$=function(){var A=function(v,m){var p=v,s=Y[m],o=null,u=0,f=null,c=[],b={},O=function(g,_){o=function(w){for(var x=new Array(w),S=0;S<w;S+=1){x[S]=new Array(w);for(var F=0;F<w;F+=1)x[S][F]=null}return x}(u=4*p+17),B(0,0),B(u-7,0),B(0,u-7),T(),U(),P(g,_),p>=7&&K(g),f==null&&(f=it(p,s,c)),Z(f,_)},B=function(g,_){for(var w=-1;w<=7;w+=1)if(!(g+w<=-1||u<=g+w))for(var x=-1;x<=7;x+=1)_+x<=-1||u<=_+x||(o[g+w][_+x]=0<=w&&w<=6&&(x==0||x==6)||0<=x&&x<=6&&(w==0||w==6)||2<=w&&w<=4&&2<=x&&x<=4)},U=function(){for(var g=8;g<u-8;g+=1)o[g][6]==null&&(o[g][6]=g%2==0);for(var _=8;_<u-8;_+=1)o[6][_]==null&&(o[6][_]=_%2==0)},T=function(){for(var g=D.getPatternPosition(p),_=0;_<g.length;_+=1)for(var w=0;w<g.length;w+=1){var x=g[_],S=g[w];if(o[x][S]==null)for(var F=-2;F<=2;F+=1)for(var tt=-2;tt<=2;tt+=1)o[x+F][S+tt]=F==-2||F==2||tt==-2||tt==2||F==0&&tt==0}},K=function(g){for(var _=D.getBCHTypeNumber(p),w=0;w<18;w+=1){var x=!g&&(_>>w&1)==1;o[Math.floor(w/3)][w%3+u-8-3]=x}for(w=0;w<18;w+=1)x=!g&&(_>>w&1)==1,o[w%3+u-8-3][Math.floor(w/3)]=x},P=function(g,_){for(var w=s<<3|_,x=D.getBCHTypeInfo(w),S=0;S<15;S+=1){var F=!g&&(x>>S&1)==1;S<6?o[S][8]=F:S<8?o[S+1][8]=F:o[u-15+S][8]=F}for(S=0;S<15;S+=1)F=!g&&(x>>S&1)==1,S<8?o[8][u-S-1]=F:S<9?o[8][15-S-1+1]=F:o[8][15-S-1]=F;o[u-8][8]=!g},Z=function(g,_){for(var w=-1,x=u-1,S=7,F=0,tt=D.getMaskFunction(_),rt=u-1;rt>0;rt-=2)for(rt==6&&(rt-=1);;){for(var ot=0;ot<2;ot+=1)if(o[x][rt-ot]==null){var st=!1;F<g.length&&(st=(g[F]>>>S&1)==1),tt(x,rt-ot)&&(st=!st),o[x][rt-ot]=st,(S-=1)==-1&&(F+=1,S=7)}if((x+=w)<0||u<=x){x-=w,w=-w;break}}},it=function(g,_,w){for(var x=k.getRSBlocks(g,_),S=N(),F=0;F<w.length;F+=1){var tt=w[F];S.put(tt.getMode(),4),S.put(tt.getLength(),D.getLengthInBits(tt.getMode(),g)),tt.write(S)}var rt=0;for(F=0;F<x.length;F+=1)rt+=x[F].dataCount;if(S.getLengthInBits()>8*rt)throw"code length overflow. ("+S.getLengthInBits()+">"+8*rt+")";for(S.getLengthInBits()+4<=8*rt&&S.put(0,4);S.getLengthInBits()%8!=0;)S.putBit(!1);for(;!(S.getLengthInBits()>=8*rt||(S.put(236,8),S.getLengthInBits()>=8*rt));)S.put(17,8);return function(ot,st){for(var lt=0,vt=0,gt=0,dt=new Array(st.length),at=new Array(st.length),V=0;V<st.length;V+=1){var ht=st[V].dataCount,wt=st[V].totalCount-ht;vt=Math.max(vt,ht),gt=Math.max(gt,wt),dt[V]=new Array(ht);for(var et=0;et<dt[V].length;et+=1)dt[V][et]=255&ot.getBuffer()[et+lt];lt+=ht;var Bt=D.getErrorCorrectPolynomial(wt),St=E(dt[V],Bt.getLength()-1).mod(Bt);for(at[V]=new Array(Bt.getLength()-1),et=0;et<at[V].length;et+=1){var xt=et+St.getLength()-at[V].length;at[V][et]=xt>=0?St.getAt(xt):0}}var Me=0;for(et=0;et<st.length;et+=1)Me+=st[et].totalCount;var pe=new Array(Me),It=0;for(et=0;et<vt;et+=1)for(V=0;V<st.length;V+=1)et<dt[V].length&&(pe[It]=dt[V][et],It+=1);for(et=0;et<gt;et+=1)for(V=0;V<st.length;V+=1)et<at[V].length&&(pe[It]=at[V][et],It+=1);return pe}(S,x)};b.addData=function(g,_){var w=null;switch(_=_||"Byte"){case"Numeric":w=J(g);break;case"Alphanumeric":w=M(g);break;case"Byte":w=q(g);break;case"Kanji":w=L(g);break;default:throw"mode:"+_}c.push(w),f=null},b.isDark=function(g,_){if(g<0||u<=g||_<0||u<=_)throw g+","+_;return o[g][_]},b.getModuleCount=function(){return u},b.make=function(){if(p<1){for(var g=1;g<40;g++){for(var _=k.getRSBlocks(g,s),w=N(),x=0;x<c.length;x++){var S=c[x];w.put(S.getMode(),4),w.put(S.getLength(),D.getLengthInBits(S.getMode(),g)),S.write(w)}var F=0;for(x=0;x<_.length;x++)F+=_[x].dataCount;if(w.getLengthInBits()<=8*F)break}p=g}O(!1,function(){for(var tt=0,rt=0,ot=0;ot<8;ot+=1){O(!0,ot);var st=D.getLostPoint(b);(ot==0||tt>st)&&(tt=st,rt=ot)}return rt}())},b.createTableTag=function(g,_){g=g||2;var w="";w+='<table style="',w+=" border-width: 0px; border-style: none;",w+=" border-collapse: collapse;",w+=" padding: 0px; margin: "+(_=_===void 0?4*g:_)+"px;",w+='">',w+="<tbody>";for(var x=0;x<b.getModuleCount();x+=1){w+="<tr>";for(var S=0;S<b.getModuleCount();S+=1)w+='<td style="',w+=" border-width: 0px; border-style: none;",w+=" border-collapse: collapse;",w+=" padding: 0px; margin: 0px;",w+=" width: "+g+"px;",w+=" height: "+g+"px;",w+=" background-color: ",w+=b.isDark(x,S)?"#000000":"#ffffff",w+=";",w+='"/>';w+="</tr>"}return(w+="</tbody>")+"</table>"},b.createSvgTag=function(g,_,w,x){var S={};typeof arguments[0]=="object"&&(g=(S=arguments[0]).cellSize,_=S.margin,w=S.alt,x=S.title),g=g||2,_=_===void 0?4*g:_,(w=typeof w=="string"?{text:w}:w||{}).text=w.text||null,w.id=w.text?w.id||"qrcode-description":null,(x=typeof x=="string"?{text:x}:x||{}).text=x.text||null,x.id=x.text?x.id||"qrcode-title":null;var F,tt,rt,ot,st=b.getModuleCount()*g+2*_,lt="";for(ot="l"+g+",0 0,"+g+" -"+g+",0 0,-"+g+"z ",lt+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',lt+=S.scalable?"":' width="'+st+'px" height="'+st+'px"',lt+=' viewBox="0 0 '+st+" "+st+'" ',lt+=' preserveAspectRatio="xMinYMin meet"',lt+=x.text||w.text?' role="img" aria-labelledby="'+X([x.id,w.id].join(" ").trim())+'"':"",lt+=">",lt+=x.text?'<title id="'+X(x.id)+'">'+X(x.text)+"</title>":"",lt+=w.text?'<description id="'+X(w.id)+'">'+X(w.text)+"</description>":"",lt+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',lt+='<path d="',tt=0;tt<b.getModuleCount();tt+=1)for(rt=tt*g+_,F=0;F<b.getModuleCount();F+=1)b.isDark(tt,F)&&(lt+="M"+(F*g+_)+","+rt+ot);return(lt+='" stroke="transparent" fill="black"/>')+"</svg>"},b.createDataURL=function(g,_){g=g||2,_=_===void 0?4*g:_;var w=b.getModuleCount()*g+2*_,x=_,S=w-_;return Q(w,w,function(F,tt){if(x<=F&&F<S&&x<=tt&&tt<S){var rt=Math.floor((F-x)/g),ot=Math.floor((tt-x)/g);return b.isDark(ot,rt)?0:1}return 1})},b.createImgTag=function(g,_,w){g=g||2,_=_===void 0?4*g:_;var x=b.getModuleCount()*g+2*_,S="";return S+="<img",S+=' src="',S+=b.createDataURL(g,_),S+='"',S+=' width="',S+=x,S+='"',S+=' height="',S+=x,S+='"',w&&(S+=' alt="',S+=X(w),S+='"'),S+"/>"};var X=function(g){for(var _="",w=0;w<g.length;w+=1){var x=g.charAt(w);switch(x){case"<":_+="&lt;";break;case">":_+="&gt;";break;case"&":_+="&amp;";break;case'"':_+="&quot;";break;default:_+=x}}return _};return b.createASCII=function(g,_){if((g=g||1)<2)return function(dt){dt=dt===void 0?2:dt;var at,V,ht,wt,et,Bt=1*b.getModuleCount()+2*dt,St=dt,xt=Bt-dt,Me={"██":"█","█ ":"▀"," █":"▄","  ":" "},pe={"██":"▀","█ ":"▀"," █":" ","  ":" "},It="";for(at=0;at<Bt;at+=2){for(ht=Math.floor((at-St)/1),wt=Math.floor((at+1-St)/1),V=0;V<Bt;V+=1)et="█",St<=V&&V<xt&&St<=at&&at<xt&&b.isDark(ht,Math.floor((V-St)/1))&&(et=" "),St<=V&&V<xt&&St<=at+1&&at+1<xt&&b.isDark(wt,Math.floor((V-St)/1))?et+=" ":et+="█",It+=dt<1&&at+1>=xt?pe[et]:Me[et];It+=`
`}return Bt%2&&dt>0?It.substring(0,It.length-Bt-1)+Array(Bt+1).join("▀"):It.substring(0,It.length-1)}(_);g-=1,_=_===void 0?2*g:_;var w,x,S,F,tt=b.getModuleCount()*g+2*_,rt=_,ot=tt-_,st=Array(g+1).join("██"),lt=Array(g+1).join("  "),vt="",gt="";for(w=0;w<tt;w+=1){for(S=Math.floor((w-rt)/g),gt="",x=0;x<tt;x+=1)F=1,rt<=x&&x<ot&&rt<=w&&w<ot&&b.isDark(S,Math.floor((x-rt)/g))&&(F=0),gt+=F?st:lt;for(S=0;S<g;S+=1)vt+=gt+`
`}return vt.substring(0,vt.length-1)},b.renderTo2dContext=function(g,_){_=_||2;for(var w=b.getModuleCount(),x=0;x<w;x++)for(var S=0;S<w;S++)g.fillStyle=b.isDark(x,S)?"black":"white",g.fillRect(x*_,S*_,_,_)},b};A.stringToBytes=(A.stringToBytesFuncs={default:function(v){for(var m=[],p=0;p<v.length;p+=1){var s=v.charCodeAt(p);m.push(255&s)}return m}}).default,A.createStringToBytes=function(v,m){var p=function(){for(var o=W(v),u=function(){var U=o.read();if(U==-1)throw"eof";return U},f=0,c={};;){var b=o.read();if(b==-1)break;var O=u(),B=u()<<8|u();c[String.fromCharCode(b<<8|O)]=B,f+=1}if(f!=m)throw f+" != "+m;return c}(),s=63;return function(o){for(var u=[],f=0;f<o.length;f+=1){var c=o.charCodeAt(f);if(c<128)u.push(c);else{var b=p[o.charAt(f)];typeof b=="number"?(255&b)==b?u.push(b):(u.push(b>>>8),u.push(255&b)):u.push(s)}}return u}};var z,H,G,R,j,Y={L:1,M:0,Q:3,H:2},D=(z=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],H=1335,G=7973,j=function(v){for(var m=0;v!=0;)m+=1,v>>>=1;return m},(R={}).getBCHTypeInfo=function(v){for(var m=v<<10;j(m)-j(H)>=0;)m^=H<<j(m)-j(H);return 21522^(v<<10|m)},R.getBCHTypeNumber=function(v){for(var m=v<<12;j(m)-j(G)>=0;)m^=G<<j(m)-j(G);return v<<12|m},R.getPatternPosition=function(v){return z[v-1]},R.getMaskFunction=function(v){switch(v){case 0:return function(m,p){return(m+p)%2==0};case 1:return function(m,p){return m%2==0};case 2:return function(m,p){return p%3==0};case 3:return function(m,p){return(m+p)%3==0};case 4:return function(m,p){return(Math.floor(m/2)+Math.floor(p/3))%2==0};case 5:return function(m,p){return m*p%2+m*p%3==0};case 6:return function(m,p){return(m*p%2+m*p%3)%2==0};case 7:return function(m,p){return(m*p%3+(m+p)%2)%2==0};default:throw"bad maskPattern:"+v}},R.getErrorCorrectPolynomial=function(v){for(var m=E([1],0),p=0;p<v;p+=1)m=m.multiply(E([1,I.gexp(p)],0));return m},R.getLengthInBits=function(v,m){if(1<=m&&m<10)switch(v){case 1:return 10;case 2:return 9;case 4:case 8:return 8;default:throw"mode:"+v}else if(m<27)switch(v){case 1:return 12;case 2:return 11;case 4:return 16;case 8:return 10;default:throw"mode:"+v}else{if(!(m<41))throw"type:"+m;switch(v){case 1:return 14;case 2:return 13;case 4:return 16;case 8:return 12;default:throw"mode:"+v}}},R.getLostPoint=function(v){for(var m=v.getModuleCount(),p=0,s=0;s<m;s+=1)for(var o=0;o<m;o+=1){for(var u=0,f=v.isDark(s,o),c=-1;c<=1;c+=1)if(!(s+c<0||m<=s+c))for(var b=-1;b<=1;b+=1)o+b<0||m<=o+b||c==0&&b==0||f==v.isDark(s+c,o+b)&&(u+=1);u>5&&(p+=3+u-5)}for(s=0;s<m-1;s+=1)for(o=0;o<m-1;o+=1){var O=0;v.isDark(s,o)&&(O+=1),v.isDark(s+1,o)&&(O+=1),v.isDark(s,o+1)&&(O+=1),v.isDark(s+1,o+1)&&(O+=1),O!=0&&O!=4||(p+=3)}for(s=0;s<m;s+=1)for(o=0;o<m-6;o+=1)v.isDark(s,o)&&!v.isDark(s,o+1)&&v.isDark(s,o+2)&&v.isDark(s,o+3)&&v.isDark(s,o+4)&&!v.isDark(s,o+5)&&v.isDark(s,o+6)&&(p+=40);for(o=0;o<m;o+=1)for(s=0;s<m-6;s+=1)v.isDark(s,o)&&!v.isDark(s+1,o)&&v.isDark(s+2,o)&&v.isDark(s+3,o)&&v.isDark(s+4,o)&&!v.isDark(s+5,o)&&v.isDark(s+6,o)&&(p+=40);var B=0;for(o=0;o<m;o+=1)for(s=0;s<m;s+=1)v.isDark(s,o)&&(B+=1);return p+Math.abs(100*B/m/m-50)/5*10},R),I=function(){for(var v=new Array(256),m=new Array(256),p=0;p<8;p+=1)v[p]=1<<p;for(p=8;p<256;p+=1)v[p]=v[p-4]^v[p-5]^v[p-6]^v[p-8];for(p=0;p<255;p+=1)m[v[p]]=p;return{glog:function(s){if(s<1)throw"glog("+s+")";return m[s]},gexp:function(s){for(;s<0;)s+=255;for(;s>=256;)s-=255;return v[s]}}}();function E(v,m){if(v.length===void 0)throw v.length+"/"+m;var p=function(){for(var o=0;o<v.length&&v[o]==0;)o+=1;for(var u=new Array(v.length-o+m),f=0;f<v.length-o;f+=1)u[f]=v[f+o];return u}(),s={getAt:function(o){return p[o]},getLength:function(){return p.length},multiply:function(o){for(var u=new Array(s.getLength()+o.getLength()-1),f=0;f<s.getLength();f+=1)for(var c=0;c<o.getLength();c+=1)u[f+c]^=I.gexp(I.glog(s.getAt(f))+I.glog(o.getAt(c)));return E(u,0)},mod:function(o){if(s.getLength()-o.getLength()<0)return s;for(var u=I.glog(s.getAt(0))-I.glog(o.getAt(0)),f=new Array(s.getLength()),c=0;c<s.getLength();c+=1)f[c]=s.getAt(c);for(c=0;c<o.getLength();c+=1)f[c]^=I.gexp(I.glog(o.getAt(c))+u);return E(f,0).mod(o)}};return s}var k=function(){var v=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],m=function(s,o){var u={};return u.totalCount=s,u.dataCount=o,u},p={getRSBlocks:function(s,o){var u=function(K,P){switch(P){case Y.L:return v[4*(K-1)+0];case Y.M:return v[4*(K-1)+1];case Y.Q:return v[4*(K-1)+2];case Y.H:return v[4*(K-1)+3];default:return}}(s,o);if(u===void 0)throw"bad rs block @ typeNumber:"+s+"/errorCorrectionLevel:"+o;for(var f=u.length/3,c=[],b=0;b<f;b+=1)for(var O=u[3*b+0],B=u[3*b+1],U=u[3*b+2],T=0;T<O;T+=1)c.push(m(B,U));return c}};return p}(),N=function(){var v=[],m=0,p={getBuffer:function(){return v},getAt:function(s){var o=Math.floor(s/8);return(v[o]>>>7-s%8&1)==1},put:function(s,o){for(var u=0;u<o;u+=1)p.putBit((s>>>o-u-1&1)==1)},getLengthInBits:function(){return m},putBit:function(s){var o=Math.floor(m/8);v.length<=o&&v.push(0),s&&(v[o]|=128>>>m%8),m+=1}};return p},J=function(v){var m=v,p={getMode:function(){return 1},getLength:function(u){return m.length},write:function(u){for(var f=m,c=0;c+2<f.length;)u.put(s(f.substring(c,c+3)),10),c+=3;c<f.length&&(f.length-c==1?u.put(s(f.substring(c,c+1)),4):f.length-c==2&&u.put(s(f.substring(c,c+2)),7))}},s=function(u){for(var f=0,c=0;c<u.length;c+=1)f=10*f+o(u.charAt(c));return f},o=function(u){if("0"<=u&&u<="9")return u.charCodeAt(0)-48;throw"illegal char :"+u};return p},M=function(v){var m=v,p={getMode:function(){return 2},getLength:function(o){return m.length},write:function(o){for(var u=m,f=0;f+1<u.length;)o.put(45*s(u.charAt(f))+s(u.charAt(f+1)),11),f+=2;f<u.length&&o.put(s(u.charAt(f)),6)}},s=function(o){if("0"<=o&&o<="9")return o.charCodeAt(0)-48;if("A"<=o&&o<="Z")return o.charCodeAt(0)-65+10;switch(o){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+o}};return p},q=function(v){var m=A.stringToBytes(v);return{getMode:function(){return 4},getLength:function(p){return m.length},write:function(p){for(var s=0;s<m.length;s+=1)p.put(m[s],8)}}},L=function(v){var m=A.stringToBytesFuncs.SJIS;if(!m)throw"sjis not supported.";(function(){var o=m("友");if(o.length!=2||(o[0]<<8|o[1])!=38726)throw"sjis not supported."})();var p=m(v),s={getMode:function(){return 8},getLength:function(o){return~~(p.length/2)},write:function(o){for(var u=p,f=0;f+1<u.length;){var c=(255&u[f])<<8|255&u[f+1];if(33088<=c&&c<=40956)c-=33088;else{if(!(57408<=c&&c<=60351))throw"illegal char at "+(f+1)+"/"+c;c-=49472}c=192*(c>>>8&255)+(255&c),o.put(c,13),f+=2}if(f<u.length)throw"illegal char at "+(f+1)}};return s},nt=function(){var v=[],m={writeByte:function(p){v.push(255&p)},writeShort:function(p){m.writeByte(p),m.writeByte(p>>>8)},writeBytes:function(p,s,o){s=s||0,o=o||p.length;for(var u=0;u<o;u+=1)m.writeByte(p[u+s])},writeString:function(p){for(var s=0;s<p.length;s+=1)m.writeByte(p.charCodeAt(s))},toByteArray:function(){return v},toString:function(){var p="";p+="[";for(var s=0;s<v.length;s+=1)s>0&&(p+=","),p+=v[s];return p+"]"}};return m},W=function(v){var m=v,p=0,s=0,o=0,u={read:function(){for(;o<8;){if(p>=m.length){if(o==0)return-1;throw"unexpected end of file./"+o}var c=m.charAt(p);if(p+=1,c=="=")return o=0,-1;c.match(/^\s$/)||(s=s<<6|f(c.charCodeAt(0)),o+=6)}var b=s>>>o-8&255;return o-=8,b}},f=function(c){if(65<=c&&c<=90)return c-65;if(97<=c&&c<=122)return c-97+26;if(48<=c&&c<=57)return c-48+52;if(c==43)return 62;if(c==47)return 63;throw"c:"+c};return u},Q=function(v,m,p){for(var s=function(B,U){var T=B,K=U,P=new Array(B*U),Z={setPixel:function(g,_,w){P[_*T+g]=w},write:function(g){g.writeString("GIF87a"),g.writeShort(T),g.writeShort(K),g.writeByte(128),g.writeByte(0),g.writeByte(0),g.writeByte(0),g.writeByte(0),g.writeByte(0),g.writeByte(255),g.writeByte(255),g.writeByte(255),g.writeString(","),g.writeShort(0),g.writeShort(0),g.writeShort(T),g.writeShort(K),g.writeByte(0);var _=it(2);g.writeByte(2);for(var w=0;_.length-w>255;)g.writeByte(255),g.writeBytes(_,w,255),w+=255;g.writeByte(_.length-w),g.writeBytes(_,w,_.length-w),g.writeByte(0),g.writeString(";")}},it=function(g){for(var _=1<<g,w=1+(1<<g),x=g+1,S=X(),F=0;F<_;F+=1)S.add(String.fromCharCode(F));S.add(String.fromCharCode(_)),S.add(String.fromCharCode(w));var tt,rt,ot,st=nt(),lt=(tt=st,rt=0,ot=0,{write:function(at,V){if(at>>>V)throw"length over";for(;rt+V>=8;)tt.writeByte(255&(at<<rt|ot)),V-=8-rt,at>>>=8-rt,ot=0,rt=0;ot|=at<<rt,rt+=V},flush:function(){rt>0&&tt.writeByte(ot)}});lt.write(_,x);var vt=0,gt=String.fromCharCode(P[vt]);for(vt+=1;vt<P.length;){var dt=String.fromCharCode(P[vt]);vt+=1,S.contains(gt+dt)?gt+=dt:(lt.write(S.indexOf(gt),x),S.size()<4095&&(S.size()==1<<x&&(x+=1),S.add(gt+dt)),gt=dt)}return lt.write(S.indexOf(gt),x),lt.write(w,x),lt.flush(),st.toByteArray()},X=function(){var g={},_=0,w={add:function(x){if(w.contains(x))throw"dup key:"+x;g[x]=_,_+=1},size:function(){return _},indexOf:function(x){return g[x]},contains:function(x){return g[x]!==void 0}};return w};return Z}(v,m),o=0;o<m;o+=1)for(var u=0;u<v;u+=1)s.setPixel(u,o,p(u,o));var f=nt();s.write(f);for(var c=function(){var B=0,U=0,T=0,K="",P={},Z=function(X){K+=String.fromCharCode(it(63&X))},it=function(X){if(!(X<0)){if(X<26)return 65+X;if(X<52)return X-26+97;if(X<62)return X-52+48;if(X==62)return 43;if(X==63)return 47}throw"n:"+X};return P.writeByte=function(X){for(B=B<<8|255&X,U+=8,T+=1;U>=6;)Z(B>>>U-6),U-=6},P.flush=function(){if(U>0&&(Z(B<<6-U),B=0,U=0),T%3!=0)for(var X=3-T%3,g=0;g<X;g+=1)K+="="},P.toString=function(){return K},P}(),b=f.toByteArray(),O=0;O<b.length;O+=1)c.writeByte(b[O]);return c.flush(),"data:image/gif;base64,"+c};return A}();$.stringToBytesFuncs["UTF-8"]=function(A){return function(z){for(var H=[],G=0;G<z.length;G++){var R=z.charCodeAt(G);R<128?H.push(R):R<2048?H.push(192|R>>6,128|63&R):R<55296||R>=57344?H.push(224|R>>12,128|R>>6&63,128|63&R):(G++,R=65536+((1023&R)<<10|1023&z.charCodeAt(G)),H.push(240|R>>18,128|R>>12&63,128|R>>6&63,128|63&R))}return H}(A)},(y=typeof(d=function(){return $})=="function"?d.apply(l,[]):d)===void 0||(h.exports=y)}},r={};function i(h){var l=r[h];if(l!==void 0)return l.exports;var d=r[h]={exports:{}};return n[h](d,d.exports,i),d.exports}i.n=h=>{var l=h&&h.__esModule?()=>h.default:()=>h;return i.d(l,{a:l}),l},i.d=(h,l)=>{for(var d in l)i.o(l,d)&&!i.o(h,d)&&Object.defineProperty(h,d,{enumerable:!0,get:l[d]})},i.o=(h,l)=>Object.prototype.hasOwnProperty.call(h,l);var a={};return(()=>{i.d(a,{default:()=>m});const h=p=>!!p&&typeof p=="object"&&!Array.isArray(p);function l(p,...s){if(!s.length)return p;const o=s.shift();return o!==void 0&&h(p)&&h(o)?(p=Object.assign({},p),Object.keys(o).forEach(u=>{const f=p[u],c=o[u];Array.isArray(f)&&Array.isArray(c)?p[u]=c:h(f)&&h(c)?p[u]=l(Object.assign({},f),c):p[u]=c}),l(p,...s)):p}function d(p,s){const o=document.createElement("a");o.download=s,o.href=p,document.body.appendChild(o),o.click(),document.body.removeChild(o)}const y={L:.07,M:.15,Q:.25,H:.3};class ${constructor({svg:s,type:o,window:u}){this._svg=s,this._type=o,this._window=u}draw(s,o,u,f){let c;switch(this._type){case"dots":c=this._drawDot;break;case"classy":c=this._drawClassy;break;case"classy-rounded":c=this._drawClassyRounded;break;case"rounded":c=this._drawRounded;break;case"extra-rounded":c=this._drawExtraRounded;break;default:c=this._drawSquare}c.call(this,{x:s,y:o,size:u,getNeighbor:f})}_rotateFigure({x:s,y:o,size:u,rotation:f=0,draw:c}){var b;const O=s+u/2,B=o+u/2;c(),(b=this._element)===null||b===void 0||b.setAttribute("transform",`rotate(${180*f/Math.PI},${O},${B})`)}_basicDot(s){const{size:o,x:u,y:f}=s;this._rotateFigure(Object.assign(Object.assign({},s),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","circle"),this._element.setAttribute("cx",String(u+o/2)),this._element.setAttribute("cy",String(f+o/2)),this._element.setAttribute("r",String(o/2))}}))}_basicSquare(s){const{size:o,x:u,y:f}=s;this._rotateFigure(Object.assign(Object.assign({},s),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","rect"),this._element.setAttribute("x",String(u)),this._element.setAttribute("y",String(f)),this._element.setAttribute("width",String(o)),this._element.setAttribute("height",String(o))}}))}_basicSideRounded(s){const{size:o,x:u,y:f}=s;this._rotateFigure(Object.assign(Object.assign({},s),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("d",`M ${u} ${f}v ${o}h `+o/2+`a ${o/2} ${o/2}, 0, 0, 0, 0 ${-o}`)}}))}_basicCornerRounded(s){const{size:o,x:u,y:f}=s;this._rotateFigure(Object.assign(Object.assign({},s),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("d",`M ${u} ${f}v ${o}h ${o}v `+-o/2+`a ${o/2} ${o/2}, 0, 0, 0, ${-o/2} ${-o/2}`)}}))}_basicCornerExtraRounded(s){const{size:o,x:u,y:f}=s;this._rotateFigure(Object.assign(Object.assign({},s),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("d",`M ${u} ${f}v ${o}h ${o}a ${o} ${o}, 0, 0, 0, ${-o} ${-o}`)}}))}_basicCornersRounded(s){const{size:o,x:u,y:f}=s;this._rotateFigure(Object.assign(Object.assign({},s),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("d",`M ${u} ${f}v `+o/2+`a ${o/2} ${o/2}, 0, 0, 0, ${o/2} ${o/2}h `+o/2+"v "+-o/2+`a ${o/2} ${o/2}, 0, 0, 0, ${-o/2} ${-o/2}`)}}))}_drawDot({x:s,y:o,size:u}){this._basicDot({x:s,y:o,size:u,rotation:0})}_drawSquare({x:s,y:o,size:u}){this._basicSquare({x:s,y:o,size:u,rotation:0})}_drawRounded({x:s,y:o,size:u,getNeighbor:f}){const c=f?+f(-1,0):0,b=f?+f(1,0):0,O=f?+f(0,-1):0,B=f?+f(0,1):0,U=c+b+O+B;if(U!==0)if(U>2||c&&b||O&&B)this._basicSquare({x:s,y:o,size:u,rotation:0});else{if(U===2){let T=0;return c&&O?T=Math.PI/2:O&&b?T=Math.PI:b&&B&&(T=-Math.PI/2),void this._basicCornerRounded({x:s,y:o,size:u,rotation:T})}if(U===1){let T=0;return O?T=Math.PI/2:b?T=Math.PI:B&&(T=-Math.PI/2),void this._basicSideRounded({x:s,y:o,size:u,rotation:T})}}else this._basicDot({x:s,y:o,size:u,rotation:0})}_drawExtraRounded({x:s,y:o,size:u,getNeighbor:f}){const c=f?+f(-1,0):0,b=f?+f(1,0):0,O=f?+f(0,-1):0,B=f?+f(0,1):0,U=c+b+O+B;if(U!==0)if(U>2||c&&b||O&&B)this._basicSquare({x:s,y:o,size:u,rotation:0});else{if(U===2){let T=0;return c&&O?T=Math.PI/2:O&&b?T=Math.PI:b&&B&&(T=-Math.PI/2),void this._basicCornerExtraRounded({x:s,y:o,size:u,rotation:T})}if(U===1){let T=0;return O?T=Math.PI/2:b?T=Math.PI:B&&(T=-Math.PI/2),void this._basicSideRounded({x:s,y:o,size:u,rotation:T})}}else this._basicDot({x:s,y:o,size:u,rotation:0})}_drawClassy({x:s,y:o,size:u,getNeighbor:f}){const c=f?+f(-1,0):0,b=f?+f(1,0):0,O=f?+f(0,-1):0,B=f?+f(0,1):0;c+b+O+B!==0?c||O?b||B?this._basicSquare({x:s,y:o,size:u,rotation:0}):this._basicCornerRounded({x:s,y:o,size:u,rotation:Math.PI/2}):this._basicCornerRounded({x:s,y:o,size:u,rotation:-Math.PI/2}):this._basicCornersRounded({x:s,y:o,size:u,rotation:Math.PI/2})}_drawClassyRounded({x:s,y:o,size:u,getNeighbor:f}){const c=f?+f(-1,0):0,b=f?+f(1,0):0,O=f?+f(0,-1):0,B=f?+f(0,1):0;c+b+O+B!==0?c||O?b||B?this._basicSquare({x:s,y:o,size:u,rotation:0}):this._basicCornerExtraRounded({x:s,y:o,size:u,rotation:Math.PI/2}):this._basicCornerExtraRounded({x:s,y:o,size:u,rotation:-Math.PI/2}):this._basicCornersRounded({x:s,y:o,size:u,rotation:Math.PI/2})}}const A={dot:"dot",square:"square",extraRounded:"extra-rounded"},z=Object.values(A);class H{constructor({svg:s,type:o,window:u}){this._svg=s,this._type=o,this._window=u}draw(s,o,u,f){let c;switch(this._type){case A.square:c=this._drawSquare;break;case A.extraRounded:c=this._drawExtraRounded;break;default:c=this._drawDot}c.call(this,{x:s,y:o,size:u,rotation:f})}_rotateFigure({x:s,y:o,size:u,rotation:f=0,draw:c}){var b;const O=s+u/2,B=o+u/2;c(),(b=this._element)===null||b===void 0||b.setAttribute("transform",`rotate(${180*f/Math.PI},${O},${B})`)}_basicDot(s){const{size:o,x:u,y:f}=s,c=o/7;this._rotateFigure(Object.assign(Object.assign({},s),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("clip-rule","evenodd"),this._element.setAttribute("d",`M ${u+o/2} ${f}a ${o/2} ${o/2} 0 1 0 0.1 0zm 0 ${c}a ${o/2-c} ${o/2-c} 0 1 1 -0.1 0Z`)}}))}_basicSquare(s){const{size:o,x:u,y:f}=s,c=o/7;this._rotateFigure(Object.assign(Object.assign({},s),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("clip-rule","evenodd"),this._element.setAttribute("d",`M ${u} ${f}v ${o}h ${o}v `+-o+`zM ${u+c} ${f+c}h `+(o-2*c)+"v "+(o-2*c)+"h "+(2*c-o)+"z")}}))}_basicExtraRounded(s){const{size:o,x:u,y:f}=s,c=o/7;this._rotateFigure(Object.assign(Object.assign({},s),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("clip-rule","evenodd"),this._element.setAttribute("d",`M ${u} ${f+2.5*c}v `+2*c+`a ${2.5*c} ${2.5*c}, 0, 0, 0, ${2.5*c} ${2.5*c}h `+2*c+`a ${2.5*c} ${2.5*c}, 0, 0, 0, ${2.5*c} ${2.5*-c}v `+-2*c+`a ${2.5*c} ${2.5*c}, 0, 0, 0, ${2.5*-c} ${2.5*-c}h `+-2*c+`a ${2.5*c} ${2.5*c}, 0, 0, 0, ${2.5*-c} ${2.5*c}M ${u+2.5*c} ${f+c}h `+2*c+`a ${1.5*c} ${1.5*c}, 0, 0, 1, ${1.5*c} ${1.5*c}v `+2*c+`a ${1.5*c} ${1.5*c}, 0, 0, 1, ${1.5*-c} ${1.5*c}h `+-2*c+`a ${1.5*c} ${1.5*c}, 0, 0, 1, ${1.5*-c} ${1.5*-c}v `+-2*c+`a ${1.5*c} ${1.5*c}, 0, 0, 1, ${1.5*c} ${1.5*-c}`)}}))}_drawDot({x:s,y:o,size:u,rotation:f}){this._basicDot({x:s,y:o,size:u,rotation:f})}_drawSquare({x:s,y:o,size:u,rotation:f}){this._basicSquare({x:s,y:o,size:u,rotation:f})}_drawExtraRounded({x:s,y:o,size:u,rotation:f}){this._basicExtraRounded({x:s,y:o,size:u,rotation:f})}}const G={dot:"dot",square:"square"},R=Object.values(G);class j{constructor({svg:s,type:o,window:u}){this._svg=s,this._type=o,this._window=u}draw(s,o,u,f){let c;c=this._type===G.square?this._drawSquare:this._drawDot,c.call(this,{x:s,y:o,size:u,rotation:f})}_rotateFigure({x:s,y:o,size:u,rotation:f=0,draw:c}){var b;const O=s+u/2,B=o+u/2;c(),(b=this._element)===null||b===void 0||b.setAttribute("transform",`rotate(${180*f/Math.PI},${O},${B})`)}_basicDot(s){const{size:o,x:u,y:f}=s;this._rotateFigure(Object.assign(Object.assign({},s),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","circle"),this._element.setAttribute("cx",String(u+o/2)),this._element.setAttribute("cy",String(f+o/2)),this._element.setAttribute("r",String(o/2))}}))}_basicSquare(s){const{size:o,x:u,y:f}=s;this._rotateFigure(Object.assign(Object.assign({},s),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","rect"),this._element.setAttribute("x",String(u)),this._element.setAttribute("y",String(f)),this._element.setAttribute("width",String(o)),this._element.setAttribute("height",String(o))}}))}_drawDot({x:s,y:o,size:u,rotation:f}){this._basicDot({x:s,y:o,size:u,rotation:f})}_drawSquare({x:s,y:o,size:u,rotation:f}){this._basicSquare({x:s,y:o,size:u,rotation:f})}}const Y="circle",D=[[1,1,1,1,1,1,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,1,1,1,1,1,1]],I=[[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]];class E{constructor(s,o){this._roundSize=u=>this._options.dotsOptions.roundSize?Math.floor(u):u,this._window=o,this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","svg"),this._element.setAttribute("width",String(s.width)),this._element.setAttribute("height",String(s.height)),this._element.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),s.dotsOptions.roundSize||this._element.setAttribute("shape-rendering","crispEdges"),this._element.setAttribute("viewBox",`0 0 ${s.width} ${s.height}`),this._defs=this._window.document.createElementNS("http://www.w3.org/2000/svg","defs"),this._element.appendChild(this._defs),this._imageUri=s.image,this._instanceId=E.instanceCount++,this._options=s}get width(){return this._options.width}get height(){return this._options.height}getElement(){return this._element}async drawQR(s){const o=s.getModuleCount(),u=Math.min(this._options.width,this._options.height)-2*this._options.margin,f=this._options.shape===Y?u/Math.sqrt(2):u,c=this._roundSize(f/o);let b={hideXDots:0,hideYDots:0,width:0,height:0};if(this._qr=s,this._options.image){if(await this.loadImage(),!this._image)return;const{imageOptions:O,qrOptions:B}=this._options,U=O.imageSize*y[B.errorCorrectionLevel],T=Math.floor(U*o*o);b=function({originalHeight:K,originalWidth:P,maxHiddenDots:Z,maxHiddenAxisDots:it,dotSize:X}){const g={x:0,y:0},_={x:0,y:0};if(K<=0||P<=0||Z<=0||X<=0)return{height:0,width:0,hideYDots:0,hideXDots:0};const w=K/P;return g.x=Math.floor(Math.sqrt(Z/w)),g.x<=0&&(g.x=1),it&&it<g.x&&(g.x=it),g.x%2==0&&g.x--,_.x=g.x*X,g.y=1+2*Math.ceil((g.x*w-1)/2),_.y=Math.round(_.x*w),(g.y*g.x>Z||it&&it<g.y)&&(it&&it<g.y?(g.y=it,g.y%2==0&&g.x--):g.y-=2,_.y=g.y*X,g.x=1+2*Math.ceil((g.y/w-1)/2),_.x=Math.round(_.y/w)),{height:_.y,width:_.x,hideYDots:g.y,hideXDots:g.x}}({originalWidth:this._image.width,originalHeight:this._image.height,maxHiddenDots:T,maxHiddenAxisDots:o-14,dotSize:c})}this.drawBackground(),this.drawDots((O,B)=>{var U,T,K,P,Z,it;return!(this._options.imageOptions.hideBackgroundDots&&O>=(o-b.hideYDots)/2&&O<(o+b.hideYDots)/2&&B>=(o-b.hideXDots)/2&&B<(o+b.hideXDots)/2||!((U=D[O])===null||U===void 0)&&U[B]||!((T=D[O-o+7])===null||T===void 0)&&T[B]||!((K=D[O])===null||K===void 0)&&K[B-o+7]||!((P=I[O])===null||P===void 0)&&P[B]||!((Z=I[O-o+7])===null||Z===void 0)&&Z[B]||!((it=I[O])===null||it===void 0)&&it[B-o+7])}),this.drawCorners(),this._options.image&&await this.drawImage({width:b.width,height:b.height,count:o,dotSize:c})}drawBackground(){var s,o,u;const f=this._element,c=this._options;if(f){const b=(s=c.backgroundOptions)===null||s===void 0?void 0:s.gradient,O=(o=c.backgroundOptions)===null||o===void 0?void 0:o.color;let B=c.height,U=c.width;if(b||O){const T=this._window.document.createElementNS("http://www.w3.org/2000/svg","rect");this._backgroundClipPath=this._window.document.createElementNS("http://www.w3.org/2000/svg","clipPath"),this._backgroundClipPath.setAttribute("id",`clip-path-background-color-${this._instanceId}`),this._defs.appendChild(this._backgroundClipPath),!((u=c.backgroundOptions)===null||u===void 0)&&u.round&&(B=U=Math.min(c.width,c.height),T.setAttribute("rx",String(B/2*c.backgroundOptions.round))),T.setAttribute("x",String(this._roundSize((c.width-U)/2))),T.setAttribute("y",String(this._roundSize((c.height-B)/2))),T.setAttribute("width",String(U)),T.setAttribute("height",String(B)),this._backgroundClipPath.appendChild(T),this._createColor({options:b,color:O,additionalRotation:0,x:0,y:0,height:c.height,width:c.width,name:`background-color-${this._instanceId}`})}}}drawDots(s){var o,u;if(!this._qr)throw"QR code is not defined";const f=this._options,c=this._qr.getModuleCount();if(c>f.width||c>f.height)throw"The canvas is too small.";const b=Math.min(f.width,f.height)-2*f.margin,O=f.shape===Y?b/Math.sqrt(2):b,B=this._roundSize(O/c),U=this._roundSize((f.width-c*B)/2),T=this._roundSize((f.height-c*B)/2),K=new $({svg:this._element,type:f.dotsOptions.type,window:this._window});this._dotsClipPath=this._window.document.createElementNS("http://www.w3.org/2000/svg","clipPath"),this._dotsClipPath.setAttribute("id",`clip-path-dot-color-${this._instanceId}`),this._defs.appendChild(this._dotsClipPath),this._createColor({options:(o=f.dotsOptions)===null||o===void 0?void 0:o.gradient,color:f.dotsOptions.color,additionalRotation:0,x:0,y:0,height:f.height,width:f.width,name:`dot-color-${this._instanceId}`});for(let P=0;P<c;P++)for(let Z=0;Z<c;Z++)s&&!s(P,Z)||!((u=this._qr)===null||u===void 0)&&u.isDark(P,Z)&&(K.draw(U+Z*B,T+P*B,B,(it,X)=>!(Z+it<0||P+X<0||Z+it>=c||P+X>=c)&&!(s&&!s(P+X,Z+it))&&!!this._qr&&this._qr.isDark(P+X,Z+it)),K._element&&this._dotsClipPath&&this._dotsClipPath.appendChild(K._element));if(f.shape===Y){const P=this._roundSize((b/B-c)/2),Z=c+2*P,it=U-P*B,X=T-P*B,g=[],_=this._roundSize(Z/2);for(let w=0;w<Z;w++){g[w]=[];for(let x=0;x<Z;x++)w>=P-1&&w<=Z-P&&x>=P-1&&x<=Z-P||Math.sqrt((w-_)*(w-_)+(x-_)*(x-_))>_?g[w][x]=0:g[w][x]=this._qr.isDark(x-2*P<0?x:x>=c?x-2*P:x-P,w-2*P<0?w:w>=c?w-2*P:w-P)?1:0}for(let w=0;w<Z;w++)for(let x=0;x<Z;x++)g[w][x]&&(K.draw(it+x*B,X+w*B,B,(S,F)=>{var tt;return!!(!((tt=g[w+F])===null||tt===void 0)&&tt[x+S])}),K._element&&this._dotsClipPath&&this._dotsClipPath.appendChild(K._element))}}drawCorners(){if(!this._qr)throw"QR code is not defined";const s=this._element,o=this._options;if(!s)throw"Element code is not defined";const u=this._qr.getModuleCount(),f=Math.min(o.width,o.height)-2*o.margin,c=o.shape===Y?f/Math.sqrt(2):f,b=this._roundSize(c/u),O=7*b,B=3*b,U=this._roundSize((o.width-u*b)/2),T=this._roundSize((o.height-u*b)/2);[[0,0,0],[1,0,Math.PI/2],[0,1,-Math.PI/2]].forEach(([K,P,Z])=>{var it,X,g,_,w,x,S,F,tt,rt,ot,st,lt,vt;const gt=U+K*b*(u-7),dt=T+P*b*(u-7);let at=this._dotsClipPath,V=this._dotsClipPath;if((!((it=o.cornersSquareOptions)===null||it===void 0)&&it.gradient||!((X=o.cornersSquareOptions)===null||X===void 0)&&X.color)&&(at=this._window.document.createElementNS("http://www.w3.org/2000/svg","clipPath"),at.setAttribute("id",`clip-path-corners-square-color-${K}-${P}-${this._instanceId}`),this._defs.appendChild(at),this._cornersSquareClipPath=this._cornersDotClipPath=V=at,this._createColor({options:(g=o.cornersSquareOptions)===null||g===void 0?void 0:g.gradient,color:(_=o.cornersSquareOptions)===null||_===void 0?void 0:_.color,additionalRotation:Z,x:gt,y:dt,height:O,width:O,name:`corners-square-color-${K}-${P}-${this._instanceId}`})),((w=o.cornersSquareOptions)===null||w===void 0?void 0:w.type)&&z.includes(o.cornersSquareOptions.type)){const ht=new H({svg:this._element,type:o.cornersSquareOptions.type,window:this._window});ht.draw(gt,dt,O,Z),ht._element&&at&&at.appendChild(ht._element)}else{const ht=new $({svg:this._element,type:((x=o.cornersSquareOptions)===null||x===void 0?void 0:x.type)||o.dotsOptions.type,window:this._window});for(let wt=0;wt<D.length;wt++)for(let et=0;et<D[wt].length;et++)!((S=D[wt])===null||S===void 0)&&S[et]&&(ht.draw(gt+et*b,dt+wt*b,b,(Bt,St)=>{var xt;return!!(!((xt=D[wt+St])===null||xt===void 0)&&xt[et+Bt])}),ht._element&&at&&at.appendChild(ht._element))}if((!((F=o.cornersDotOptions)===null||F===void 0)&&F.gradient||!((tt=o.cornersDotOptions)===null||tt===void 0)&&tt.color)&&(V=this._window.document.createElementNS("http://www.w3.org/2000/svg","clipPath"),V.setAttribute("id",`clip-path-corners-dot-color-${K}-${P}-${this._instanceId}`),this._defs.appendChild(V),this._cornersDotClipPath=V,this._createColor({options:(rt=o.cornersDotOptions)===null||rt===void 0?void 0:rt.gradient,color:(ot=o.cornersDotOptions)===null||ot===void 0?void 0:ot.color,additionalRotation:Z,x:gt+2*b,y:dt+2*b,height:B,width:B,name:`corners-dot-color-${K}-${P}-${this._instanceId}`})),((st=o.cornersDotOptions)===null||st===void 0?void 0:st.type)&&R.includes(o.cornersDotOptions.type)){const ht=new j({svg:this._element,type:o.cornersDotOptions.type,window:this._window});ht.draw(gt+2*b,dt+2*b,B,Z),ht._element&&V&&V.appendChild(ht._element)}else{const ht=new $({svg:this._element,type:((lt=o.cornersDotOptions)===null||lt===void 0?void 0:lt.type)||o.dotsOptions.type,window:this._window});for(let wt=0;wt<I.length;wt++)for(let et=0;et<I[wt].length;et++)!((vt=I[wt])===null||vt===void 0)&&vt[et]&&(ht.draw(gt+et*b,dt+wt*b,b,(Bt,St)=>{var xt;return!!(!((xt=I[wt+St])===null||xt===void 0)&&xt[et+Bt])}),ht._element&&V&&V.appendChild(ht._element))}})}loadImage(){return new Promise((s,o)=>{var u;const f=this._options;if(!f.image)return o("Image is not defined");if(!((u=f.nodeCanvas)===null||u===void 0)&&u.loadImage)f.nodeCanvas.loadImage(f.image).then(c=>{var b,O;if(this._image=c,this._options.imageOptions.saveAsBlob){const B=(b=f.nodeCanvas)===null||b===void 0?void 0:b.createCanvas(this._image.width,this._image.height);(O=B==null?void 0:B.getContext("2d"))===null||O===void 0||O.drawImage(c,0,0),this._imageUri=B==null?void 0:B.toDataURL()}s()}).catch(o);else{const c=new this._window.Image;typeof f.imageOptions.crossOrigin=="string"&&(c.crossOrigin=f.imageOptions.crossOrigin),this._image=c,c.onload=async()=>{this._options.imageOptions.saveAsBlob&&(this._imageUri=await async function(b,O){return new Promise(B=>{const U=new O.XMLHttpRequest;U.onload=function(){const T=new O.FileReader;T.onloadend=function(){B(T.result)},T.readAsDataURL(U.response)},U.open("GET",b),U.responseType="blob",U.send()})}(f.image||"",this._window)),s()},c.src=f.image}})}async drawImage({width:s,height:o,count:u,dotSize:f}){const c=this._options,b=this._roundSize((c.width-u*f)/2),O=this._roundSize((c.height-u*f)/2),B=b+this._roundSize(c.imageOptions.margin+(u*f-s)/2),U=O+this._roundSize(c.imageOptions.margin+(u*f-o)/2),T=s-2*c.imageOptions.margin,K=o-2*c.imageOptions.margin,P=this._window.document.createElementNS("http://www.w3.org/2000/svg","image");P.setAttribute("href",this._imageUri||""),P.setAttribute("xlink:href",this._imageUri||""),P.setAttribute("x",String(B)),P.setAttribute("y",String(U)),P.setAttribute("width",`${T}px`),P.setAttribute("height",`${K}px`),this._element.appendChild(P)}_createColor({options:s,color:o,additionalRotation:u,x:f,y:c,height:b,width:O,name:B}){const U=O>b?O:b,T=this._window.document.createElementNS("http://www.w3.org/2000/svg","rect");if(T.setAttribute("x",String(f)),T.setAttribute("y",String(c)),T.setAttribute("height",String(b)),T.setAttribute("width",String(O)),T.setAttribute("clip-path",`url('#clip-path-${B}')`),s){let K;if(s.type==="radial")K=this._window.document.createElementNS("http://www.w3.org/2000/svg","radialGradient"),K.setAttribute("id",B),K.setAttribute("gradientUnits","userSpaceOnUse"),K.setAttribute("fx",String(f+O/2)),K.setAttribute("fy",String(c+b/2)),K.setAttribute("cx",String(f+O/2)),K.setAttribute("cy",String(c+b/2)),K.setAttribute("r",String(U/2));else{const P=((s.rotation||0)+u)%(2*Math.PI),Z=(P+2*Math.PI)%(2*Math.PI);let it=f+O/2,X=c+b/2,g=f+O/2,_=c+b/2;Z>=0&&Z<=.25*Math.PI||Z>1.75*Math.PI&&Z<=2*Math.PI?(it-=O/2,X-=b/2*Math.tan(P),g+=O/2,_+=b/2*Math.tan(P)):Z>.25*Math.PI&&Z<=.75*Math.PI?(X-=b/2,it-=O/2/Math.tan(P),_+=b/2,g+=O/2/Math.tan(P)):Z>.75*Math.PI&&Z<=1.25*Math.PI?(it+=O/2,X+=b/2*Math.tan(P),g-=O/2,_-=b/2*Math.tan(P)):Z>1.25*Math.PI&&Z<=1.75*Math.PI&&(X+=b/2,it+=O/2/Math.tan(P),_-=b/2,g-=O/2/Math.tan(P)),K=this._window.document.createElementNS("http://www.w3.org/2000/svg","linearGradient"),K.setAttribute("id",B),K.setAttribute("gradientUnits","userSpaceOnUse"),K.setAttribute("x1",String(Math.round(it))),K.setAttribute("y1",String(Math.round(X))),K.setAttribute("x2",String(Math.round(g))),K.setAttribute("y2",String(Math.round(_)))}s.colorStops.forEach(({offset:P,color:Z})=>{const it=this._window.document.createElementNS("http://www.w3.org/2000/svg","stop");it.setAttribute("offset",100*P+"%"),it.setAttribute("stop-color",Z),K.appendChild(it)}),T.setAttribute("fill",`url('#${B}')`),this._defs.appendChild(K)}else o&&T.setAttribute("fill",o);this._element.appendChild(T)}}E.instanceCount=0;const k=E,N="canvas",J={};for(let p=0;p<=40;p++)J[p]=p;const M={type:N,shape:"square",width:300,height:300,data:"",margin:0,qrOptions:{typeNumber:J[0],mode:void 0,errorCorrectionLevel:"Q"},imageOptions:{saveAsBlob:!0,hideBackgroundDots:!0,imageSize:.4,crossOrigin:void 0,margin:0},dotsOptions:{type:"square",color:"#000",roundSize:!0},backgroundOptions:{round:0,color:"#fff"}};function q(p){const s=Object.assign({},p);if(!s.colorStops||!s.colorStops.length)throw"Field 'colorStops' is required in gradient";return s.rotation?s.rotation=Number(s.rotation):s.rotation=0,s.colorStops=s.colorStops.map(o=>Object.assign(Object.assign({},o),{offset:Number(o.offset)})),s}function L(p){const s=Object.assign({},p);return s.width=Number(s.width),s.height=Number(s.height),s.margin=Number(s.margin),s.imageOptions=Object.assign(Object.assign({},s.imageOptions),{hideBackgroundDots:!!s.imageOptions.hideBackgroundDots,imageSize:Number(s.imageOptions.imageSize),margin:Number(s.imageOptions.margin)}),s.margin>Math.min(s.width,s.height)&&(s.margin=Math.min(s.width,s.height)),s.dotsOptions=Object.assign({},s.dotsOptions),s.dotsOptions.gradient&&(s.dotsOptions.gradient=q(s.dotsOptions.gradient)),s.cornersSquareOptions&&(s.cornersSquareOptions=Object.assign({},s.cornersSquareOptions),s.cornersSquareOptions.gradient&&(s.cornersSquareOptions.gradient=q(s.cornersSquareOptions.gradient))),s.cornersDotOptions&&(s.cornersDotOptions=Object.assign({},s.cornersDotOptions),s.cornersDotOptions.gradient&&(s.cornersDotOptions.gradient=q(s.cornersDotOptions.gradient))),s.backgroundOptions&&(s.backgroundOptions=Object.assign({},s.backgroundOptions),s.backgroundOptions.gradient&&(s.backgroundOptions.gradient=q(s.backgroundOptions.gradient))),s}var nt=i(873),W=i.n(nt);function Q(p){if(!p)throw new Error("Extension must be defined");p[0]==="."&&(p=p.substring(1));const s={bmp:"image/bmp",gif:"image/gif",ico:"image/vnd.microsoft.icon",jpeg:"image/jpeg",jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml",tif:"image/tiff",tiff:"image/tiff",webp:"image/webp",pdf:"application/pdf"}[p.toLowerCase()];if(!s)throw new Error(`Extension "${p}" is not supported`);return s}class v{constructor(s){s!=null&&s.jsdom?this._window=new s.jsdom("",{resources:"usable"}).window:this._window=window,this._options=s?L(l(M,s)):M,this.update()}static _clearContainer(s){s&&(s.innerHTML="")}_setupSvg(){if(!this._qr)return;const s=new k(this._options,this._window);this._svg=s.getElement(),this._svgDrawingPromise=s.drawQR(this._qr).then(()=>{var o;this._svg&&((o=this._extension)===null||o===void 0||o.call(this,s.getElement(),this._options))})}_setupCanvas(){var s,o;this._qr&&(!((s=this._options.nodeCanvas)===null||s===void 0)&&s.createCanvas?(this._nodeCanvas=this._options.nodeCanvas.createCanvas(this._options.width,this._options.height),this._nodeCanvas.width=this._options.width,this._nodeCanvas.height=this._options.height):(this._domCanvas=document.createElement("canvas"),this._domCanvas.width=this._options.width,this._domCanvas.height=this._options.height),this._setupSvg(),this._canvasDrawingPromise=(o=this._svgDrawingPromise)===null||o===void 0?void 0:o.then(()=>{var u;if(!this._svg)return;const f=this._svg,c=new this._window.XMLSerializer().serializeToString(f),b=btoa(c),O=`data:${Q("svg")};base64,${b}`;if(!((u=this._options.nodeCanvas)===null||u===void 0)&&u.loadImage)return this._options.nodeCanvas.loadImage(O).then(B=>{var U,T;B.width=this._options.width,B.height=this._options.height,(T=(U=this._nodeCanvas)===null||U===void 0?void 0:U.getContext("2d"))===null||T===void 0||T.drawImage(B,0,0)});{const B=new this._window.Image;return new Promise(U=>{B.onload=()=>{var T,K;(K=(T=this._domCanvas)===null||T===void 0?void 0:T.getContext("2d"))===null||K===void 0||K.drawImage(B,0,0),U()},B.src=O})}}))}async _getElement(s="png"){if(!this._qr)throw"QR code is empty";return s.toLowerCase()==="svg"?(this._svg&&this._svgDrawingPromise||this._setupSvg(),await this._svgDrawingPromise,this._svg):((this._domCanvas||this._nodeCanvas)&&this._canvasDrawingPromise||this._setupCanvas(),await this._canvasDrawingPromise,this._domCanvas||this._nodeCanvas)}update(s){v._clearContainer(this._container),this._options=s?L(l(this._options,s)):this._options,this._options.data&&(this._qr=W()(this._options.qrOptions.typeNumber,this._options.qrOptions.errorCorrectionLevel),this._qr.addData(this._options.data,this._options.qrOptions.mode||function(o){switch(!0){case/^[0-9]*$/.test(o):return"Numeric";case/^[0-9A-Z $%*+\-./:]*$/.test(o):return"Alphanumeric";default:return"Byte"}}(this._options.data)),this._qr.make(),this._options.type===N?this._setupCanvas():this._setupSvg(),this.append(this._container))}append(s){if(s){if(typeof s.appendChild!="function")throw"Container should be a single DOM node";this._options.type===N?this._domCanvas&&s.appendChild(this._domCanvas):this._svg&&s.appendChild(this._svg),this._container=s}}applyExtension(s){if(!s)throw"Extension function should be defined.";this._extension=s,this.update()}deleteExtension(){this._extension=void 0,this.update()}async getRawData(s="png"){if(!this._qr)throw"QR code is empty";const o=await this._getElement(s),u=Q(s);if(!o)return null;if(s.toLowerCase()==="svg"){const f=`<?xml version="1.0" standalone="no"?>\r
${new this._window.XMLSerializer().serializeToString(o)}`;return typeof Blob>"u"||this._options.jsdom?Buffer.from(f):new Blob([f],{type:u})}return new Promise(f=>{const c=o;if("toBuffer"in c)if(u==="image/png")f(c.toBuffer(u));else if(u==="image/jpeg")f(c.toBuffer(u));else{if(u!=="application/pdf")throw Error("Unsupported extension");f(c.toBuffer(u))}else"toBlob"in c&&c.toBlob(f,u,1)})}async download(s){if(!this._qr)throw"QR code is empty";if(typeof Blob>"u")throw"Cannot download in Node.js, call getRawData instead.";let o="png",u="qr";typeof s=="string"?(o=s,console.warn("Extension is deprecated as argument for 'download' method, please pass object { name: '...', extension: '...' } as argument")):typeof s=="object"&&s!==null&&(s.name&&(u=s.name),s.extension&&(o=s.extension));const f=await this._getElement(o);if(f)if(o.toLowerCase()==="svg"){let c=new XMLSerializer().serializeToString(f);c=`<?xml version="1.0" standalone="no"?>\r
`+c,d(`data:${Q(o)};charset=utf-8,${encodeURIComponent(c)}`,`${u}.svg`)}else d(f.toDataURL(Q(o)),`${u}.${o}`)}}const m=v})(),a.default})())})(yr);var Ho=yr.exports;const Go=Fo(Ho),Zo=`
<div class="near-mobile">
    <div class="near-mobile-overlay"></div>
    <div class="near-mobile-card">
        <header>
        </header>

        <section class="near-mobile-logo-section">
            <img src="https://near-mobile-signer-backend_production.peersyst.tech/assets/near-logo.svg" class="near-mobile-logo" />
        </section>

        <div class="near-mobile-layout">
            <div class="near-mobile-qr-section">
                <p style="font-size: 24px;">Connect Wallet</p>
                <div class="near-mobile-qr-wrap">
                    <div id="qr-code" class="near-mobile-qr"></div>
                </div>

                <div class="near-mobile-responsive-layout near-mobile-redirect-visible">
                    <a
                        id="approve-button"
                        class="near-mobile-button near-mobile-redirect-visible"
                        target="_parent"
                        rel="noopener noreferrer"
                    >
                        Sign transaction
                    </a>
                </div>
            </div>

            <footer class="near-mobile-footer">
                <div class="near-mobile-links">
                    <a onclick="window.selector.open('https://apps.apple.com/app/near-mobile/id6443501225')">
                        <div class="near-mobile-link">
                            <img src="https://near-mobile-signer-backend_production.peersyst.tech/assets/ios.svg" />
                            <p>App Store</p>
                        </div>
                    </a>
                    
                    <a class="near-mobile-android" onclick="window.selector.open('https://play.google.com/store/apps/details?id=com.peersyst.nearmobilewallet')">
                        <div class="near-mobile-link">
                            <img src="https://near-mobile-signer-backend_production.peersyst.tech/assets/play-store.svg" />
                            <p>Google Play</p>
                        </div>
                    </a>
                </div>
                <p class="near-mobile-subtitle">
                    Don’t have an account yet?
                    <a onclick="window.selector.open('https://nearmobile.app')">Download the app</a>
                </p>
            </footer>
        </div>
    </div>
</div>
`,Vo=`
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;600&display=swap" rel="stylesheet" />
<title>Near Mobile Wallet Signer</title>
<style>
    * {
        font-family: Manrope, sans-serif;
        box-sizing: border-box;
    }

    body {
        margin: 0;
        padding: 0;
    }

    p {
        margin-block: 0;
        font-weight: 600;
        color: #fff;
    }

    a {
        font-family: Manrope;
        font-style: normal;
        font-weight: 600;
        font-size: 1rem;
        line-height: 1.375rem;
        text-decoration: none;
        color: #fff !important;
        padding: 0;
        margin: 0;
    }

    *::-webkit-scrollbar {
        display: none;
    }

    input::-webkit-outer-spin-button,
    input::-webkit-inner-spin-button {
        -webkit-appearance: none;
        margin: 0;
    }

    shader-art {
        display: block;
        width: 100%;
        height: 100%;
    }

    shader-art canvas {
        display: block;
        width: 100%;
        height: 100%;
    }

    header {
        padding: 1.25rem 1.25rem 0rem;
        display: flex;
        height: fit-content;
        width: 100%;
        justify-content: flex-end;
        align-items: flex-end;
    }

    .near-mobile {
        opacity: 1;
        visibility: visible;
        transition: visibility linear, opacity 0.25s;
        justify-content: center;
        align-items: center;
        font-family: Manrope, sans-serif;
        z-index: 10000;
        display: flex;
        min-height: 100%;
        min-width: 100%;
        position: fixed;
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
    }

    .near-mobile-overlay {
        position: absolute;
        background: rgba(38, 38, 38, 0.6);
        height: 100%;
        width: 100%;
    }

    .near-mobile-close-button {
        height: 1.5rem;
        width: 1.5rem;
        padding: 0;
    }

    .near-mobile-logo {
        width: 8rem;
        height: 2rem;
    }

    .near-mobile-logo-section {
        display: flex;
        width: 100%;
        flex-direction: row;
        align-items: center;
        justify-content: center;
        padding-bottom: 1rem;
        border-bottom: 1px solid rgba(255, 255, 255, 0.12);
    }

    .near-mobile-layout {
        width: 100%;
        height: 100%;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        gap: 1.25rem;
        padding: 0 2rem 2rem;
    }

    .near-mobile-card {
        display: flex;
        flex-direction: column;
        box-sizing: border-box;
        position: absolute;
        align-items: center;
        justify-content: center;
        overflow: hidden;
        height: 100%;
        width: 100%;
        background: linear-gradient(90deg, #5f8afa 0%, #6b6ef9 100%);
        font-size: 1rem;
        line-height: 1.6;
        transition: visibility linear, opacity 0.25s;
    }

    .near-mobile-qr-section {
        width: 100%;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        gap: 1.75rem;
    }

    .near-mobile-qr-wrap {
        display: flex;
        justify-content: center;
        align-items: center;
        background: rgba(255, 255, 255, 0.12);
        backdrop-filter: blur(8px);
        border-radius: 0.5rem;
    }

    .near-mobile-qr {
        padding: 2.3125rem;
    }

    .near-mobile-footer {
        width: 100%;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        display: flex;
        gap: 1.75rem;
    }

    .near-mobile-links {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 1rem;
        width: 100%;
    }

    .near-mobile-links a {
        width: 100%;
        max-height: 3rem;
        background: #000;
        border-radius: 9999px;
        border: 2px solid rgba(38, 38, 38, 0.08);
        cursor: pointer;
    }

    .near-mobile-footer p {
        text-align: center;
    }

    .near-mobile-close-button {
        font-family: Manrope;
        font-style: normal;
        font-weight: bolder;
        font-size: 1rem;
        border: none;
        margin: 0;
        outline: none;
        cursor: pointer;
        height: 2rem;
        background-color: transparent;
        justify-content: center;
        align-items: center;
    }

    .near-mobile-button {
        border: none;
        outline: 0;
        padding: 0;
        margin: 0;
        cursor: pointer;
        font-size: 1em;
        font-weight: bolder;
        flex-shrink: 0;
        width: 100%;
        height: 3rem;
        max-width: 336px;
        border-radius: 999px;
        transition: 0.1s opacity;
        background: #fff;
        text-decoration: none;
        color: #000 !important;
        align-items: center;
        justify-content: center;
    }

    .near-mobile-link {
        display: flex;
        flex: 1;
        flex-direction: row;
        align-items: center;
        justify-content: center;
        gap: 10px;
        color: #fff;
        font-weight: 600;
        padding: 0.75rem 1.125rem;
        transition: opacity 0.1s ease-in-out;
    }

    .near-mobile-link img {
        color: #fff;
    }

    .near-mobile-link:hover,
    .near-mobile-redirect:hover {
        opacity: 0.7;
    }

    .near-mobile-redirect.disabled {
        cursor: default;
        opacity: 0.7;
    }

    .near-mobile-subtitle {
        font-size: 0.875rem;
        color: rgba(255, 255, 255, 0.6);
    }

    .near-mobile-subtitle a {
        font-size: 0.875rem;
        font-weight: bold;
        color: #3f4246;
    }

    .near-mobile-icon {
        width: 1.5rem;
        height: 1.5rem;
        color: white;
        opacity: 0.4;
    }

    .near-mobile-responsive-layout {
        width: 100%;
        text-align: center;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        gap: 0.5rem;
    }
</style>
`,vr="https://near-mobile-signer-backend_production.peersyst.tech",Yo="near-mobile-wallet://sign",Xo=function(){let t=!1;return function(e){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0)}(navigator.userAgent||navigator.vendor||window.opera),t};document.head.innerHTML=Vo;const _r=document.createElement("div");_r.innerHTML=Zo,document.body.appendChild(_r);const ge=document.getElementById("approve-button");ge&&(ge.style.display="none");async function Jo({requestUrl:t}){const e=document.getElementById("qr-code");if(e.innerHTML="",new Go({width:180,height:180,type:"svg",data:t,dotsOptions:{color:"#FFFFFF"},backgroundOptions:{color:"transparent"},cornersSquareOptions:{color:"#FFFFFF"}}).append(e),Xo()&&ge){const r=t.split("/"),i=r[r.length-1],a=r[r.length-2];ge.style.display="flex",ge.onclick=()=>{window.selector.open(`${vr}/api/deep-link?uuid=${i}&type=${a}`)}}}const se=Uo({signerBackendUrl:vr,nearMobileWalletUrl:Yo,storage:{get:t=>window.selector.storage.get(t),set:(t,e)=>window.selector.storage.set(t,e),remove:t=>window.selector.storage.remove(t)},getNetworkProviders:t=>{var n,r;const e=(r=(n=window.selector)==null?void 0:n.providers)==null?void 0:r[t];return e&&e.length>0?e:[t==="mainnet"?"https://rpc.mainnet.near.org":"https://rpc.testnet.near.org"]},onRequested:({requestUrl:t})=>{Jo({requestUrl:t})}});(async()=>({async signIn(t){return window.selector.ui.showIframe(),se.signIn(t)},async signOut({network:t}){window.selector.ui.showIframe(),await se.signOut({network:t})},async getAccounts({network:t}){return se.getAccounts({network:t})},async signAndSendTransaction({network:t,signerId:e,receiverId:n,actions:r}){return window.selector.ui.showIframe(),se.signAndSendTransaction({network:t,signerId:e,receiverId:n,actions:r})},async verifyOwner(){throw Error("[NearMobileWallet]: verifyOwner is deprecated, use signMessage method with implementation NEP0413 Standard")},async signMessage({network:t,recipient:e,message:n,nonce:r,callbackUrl:i,state:a,accountId:h}){window.selector.ui.showIframe();const l=await se.signMessage({network:t,recipient:e,message:n,nonce:Array.from(r),callbackUrl:i,state:a,accountId:h});return{accountId:l.accountId,signature:l.signature,publicKey:l.publicKey}},async signAndSendTransactions({network:t,signerId:e,transactions:n}){return window.selector.ui.showIframe(),se.signAndSendTransactions({network:t,signerId:e,transactions:n})}}))().then(t=>{window.selector.ready(t)})})();
