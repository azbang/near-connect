var O=Object.defineProperty;var R=(u,d,w)=>d in u?O(u,d,{enumerable:!0,configurable:!0,writable:!0,value:w}):u[d]=w;var m=(u,d,w)=>R(u,typeof d!="symbol"?d+"":d,w);(function(){"use strict";var I,v;const d=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],w=n=>n!==""&&d.reduce((e,[r,t])=>{if(e)return e;const o=t.exec(n);return!!o&&[r,o]},!1),y=n=>{if(typeof navigator>"u")return!1;const e=w(navigator.userAgent);if(!e)return!1;const[r]=e;return r==="searchbot"?!1:!!n.find(t=>t===r)},E=n=>{let e="";for(let r=0;r<n.length;r++)e+=String.fromCharCode(n[r]);return btoa(e)},C=n=>E(new TextEncoder().encode(n));let k=123;class f extends Error{constructor(r,t){super(r);m(this,"type");this.type=t}}class p extends Error{constructor(e,r,t){super(`${e} ${r}: ${t}`)}}class b extends p{constructor(e){super(0,e,"Timeout error")}}const A=n=>new Promise(e=>setTimeout(e,n)),x=Math.random()>.5,T=["https://relmn.aurora.dev","https://nearrpc.aurora.dev",x?"https://c1.rpc.fastnear.com":"https://c2.rpc.fastnear.com",x?"https://c2.rpc.fastnear.com":"https://c1.rpc.fastnear.com"];class _{constructor(e=T,r=3e4,t=3,o=!0){m(this,"providers");m(this,"currentProviderIndex",0);m(this,"startTimeout");this.timeout=r,this.triesCountForEveryProvider=t,this.incrementTimout=o,this.currentProviderIndex=0,this.providers=e.length>0?e:T,this.startTimeout=r}async block(e){return this.sendJsonRpc("block",e)}async query(e){return this.sendJsonRpc("query",e)}async txStatus(e,r,t){return this.sendJsonRpc("tx",{tx_hash:e,sender_account_id:r,wait_until:t})}async sendTransaction(e){const r=e.encode();return this.sendJsonRpc("send_tx",{signed_tx_base64:E(new Uint8Array(r)),wait_until:"EXECUTED_OPTIMISTIC"})}async viewMethod(e){const r=C(JSON.stringify(e.args)),t=await this.query({args_base64:r,finality:"optimistic",request_type:"call_function",method_name:e.methodName,account_id:e.contractId});return JSON.parse(new TextDecoder().decode(new Uint8Array(t.result)))}async sendJsonRpc(e,r,t=0){const o=this.providers[this.currentProviderIndex],i=Date.now();try{const s=await this.send(e,r,o,this.timeout);return this.timeout=Math.max(this.startTimeout,this.timeout/1.2),s}catch(s){if(s instanceof b&&this.incrementTimout&&(this.timeout=Math.min(6e4,this.timeout*1.2)),s instanceof p){if(this.currentProviderIndex+=1,this.providers[this.currentProviderIndex]==null&&(this.currentProviderIndex=0),t+1>this.providers.length*this.triesCountForEveryProvider)throw s;const l=500*t,a=Date.now()-i;return a<l&&await A(l-a),await this.sendJsonRpc(e,r,t+1)}throw s}}async send(e,r,t,o){const i=new AbortController,s=setTimeout(()=>i.abort(),o),l=await fetch(t,{body:JSON.stringify({method:e,params:r,id:k++,jsonrpc:"2.0"}),headers:{"Content-Type":"application/json",Referer:"https://my.herewallet.app"},signal:i.signal,method:"POST"}).catch(()=>{throw clearInterval(s),i.signal.aborted?new b("RPC Network Error"):window.navigator.onLine?new p(0,"RPC Network Error","Unknown Near RPC Error, maybe connection unstable, try VPN"):new p(0,"RPC Network Error","No internet connection")});if(clearInterval(s),!l.ok){const h=await l.text().catch(()=>"Unknown error");throw new p(l.status,"RPC Network Error",h)}const a=await l.json();if(a.error){if(typeof a.error.data=="object")throw typeof a.error.data.error_message=="string"&&typeof a.error.data.error_type=="string"?new f(a.error.data.error_message,a.error.data.error_type):new f(JSON.stringify(a.error.data),"ServerError");const h=`[${a.error.code}] ${a.error.message}: ${a.error.data}`;throw a.error.data==="Timeout"||h.includes("Timeout error")||h.includes("query has timed out")?new f(h,"TimeoutError"):new f(h,a.error.name||"UntypedError")}return a.result}}new _;const g=async()=>{try{await window.selector.external("okxwallet.near","isSignedIn")}catch{let n="https://chromewebstore.google.com/detail/%E6%AC%A7%E6%98%93-web3-%E9%92%B1%E5%8C%85/mcohilncbfahbmgdjkbpemcciiolgcge";y(["safari"])&&(n="https://apps.apple.com/us/app/okx-wallet/id6463797825"),y(["edge-chromium"])&&(n="https://microsoftedge.microsoft.com/addons/detail/%E6%AC%A7%E6%98%93-web3-%E9%92%B1%E5%8C%85/pbpjkcldjiffchgbbndmhojiacbgflha"),await window.selector.ui.whenApprove({title:"Download OKX Wallet",button:"Download"}),window.selector.open(n)}},S=new _((v=(I=window.selector)==null?void 0:I.providers)==null?void 0:v.mainnet),c=async(n,...e)=>await window.selector.external("okxwallet.near",n,...e);(async()=>{const n=async()=>{await c("isSignedIn")&&await c("signOut")};return{async signIn({contractId:r,methodNames:t}){try{await g();const{accessKey:o,accountId:i}=await c("requestSignIn",{contractId:r||"",methodNames:t}),s=o==null?void 0:o.publicKey;return[{accountId:i,publicKey:s?s.toString():void 0}]}catch{throw await n(),new Error("Failed to sign in")}},signOut:n,getAccounts:async()=>{const r=await c("getAccountId");return r?[{accountId:r}]:[]},async verifyOwner(){throw new Error("Method not supported by OKX Wallet")},async signMessage(r){try{return await g(),await c("signMessage",r)}catch{throw new Error("sign Error")}},async signAndSendTransaction({receiverId:r,actions:t}){if(await g(),!await c("isSignedIn"))throw new Error("Wallet not signed in");if(!r)throw new Error("Receiver ID is required");try{const o=await c("signTransaction",{receiverId:r,actions:t.filter(i=>i.type==="FunctionCall").map(i=>i.params)});return S.sendJsonRpc("send_tx",{signed_tx_base64:o,wait_until:"EXECUTED_OPTIMISTIC"})}catch(o){throw console.error("signAndSendTransaction",o),new Error("sign Error")}},async signAndSendTransactions({transactions:r}){if(await g(),!await c("isSignedIn"))throw new Error("Wallet not signed in");if(r.some(t=>t.actions.some(o=>o.type!=="FunctionCall")))throw new Error("Only FunctionCall actions are supported by OKX Wallet");try{const t=await c("requestSignTransactions",{transactions:r.map(s=>({actions:s.actions.map(l=>l.params),receiverId:s.receiverId}))}),{txs:o}=t,i=[];for(let s=0;s<o.length;s++)i.push(await S.sendJsonRpc("send_tx",{signed_tx_base64:o[s].signedTx,wait_until:"EXECUTED_OPTIMISTIC"}));return i}catch(t){throw console.error("signAndSendTransactions",t),new Error("sign Error")}},async createSignedTransaction(r,t){if(await g(),!await c("isSignedIn"))throw new Error("Wallet not signed in");if(!r)throw new Error("Receiver ID is required");if(t.some(o=>o.type!=="FunctionCall"))throw new Error("Only FunctionCall actions are supported by OKX Wallet");try{return await c("signTransaction",{actions:t.map(i=>i.params),receiverId:r})}catch{throw new Error("Failed to create signed transaction")}}}})().then(n=>{window.selector.ready(n)})})();
